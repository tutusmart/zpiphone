{"version":3,"sources":["webpack:///src/components/ActivitiesDetails.vue","webpack:///./src/components/ActivitiesDetails.vue?2066","webpack:///./src/components/ActivitiesDetails.vue"],"names":["ActivitiesDetails","name","data","applyList","src","buttonShow","promptly","Sign_up","timestamp","applying","disabled","disabledCancel","Dontsignup","pbotton","pbotton1","pbotton2","questionnaire","questionnaire1","questionnaire2","feedbackk","placeholder","message","imgList","imgIndexMap","map_default","a","locationObj","locationDetail","latitudeAndLongitude","methods","onClickLeft","this","$store","state","activitiesDetailsObj","utils","goBack","clickToSign","sood","_this","getTime","startTime","Toast","id","webApp","WebCallApp","res","obj","getPrams","teachingId","params","qrCodeInfoJson","stringify_default","memberCaId","userInfo","human","caId","ajax","url","api","saveQrSignInOrSignOut","method","success","console","log","location","_this2","AMap","plugin","geolocation","Geolocation","enableHighAccuracy","timeout","buttonOffset","Pixel","getCurrentPosition","event","addListener","formattedAddress","position","lat","lng","flage","err","pageDisplay","condition","getLeaveList","activityId","_this3","param","isPrceview","activityDetail","attachmentList","forEach","item","index","checkSuffix","push","path","set","length","Date","hours","parseInt","sd","isSignUp","joinFlag","isHaveOpinion","showAttachment","attachment","imagePreview","get","isInAndroid","downLoadFile","applyingY","flag","memberId","upOrCancelSignTeaching","applyClick","cancelClick","feedback","beforeClose","action","done","content","saveFeedBackForTeaching","questionnaireSurvey","$router","created","components_ActivitiesDetails","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","fixed","left-arrow","on","click-left","_v","_s","endTime","speaker","locationOfTeaching","numOfSignUp","_m","domProps","innerHTML","detail","_l","i","click","$event","class","_e","show-cancel-button","confirm-button-text","before-close","model","value","callback","$$v","expression","type","maxlength","rows","autosize","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/41.33ab3d12048786ac5146.js","sourcesContent":["<template>\n  <div>\n    <van-nav-bar title=\"活动详情\" class=\"header\" fixed left-arrow @click-left=\"onClickLeft\"/>\n\n    <div class=\"layout_content\">\n      <div>\n        <div class=\"heade\">\n          <ul class=\"heade_top\">\n            <li>\n              <h3>{{applyList.title}}</h3>\n            </li>\n            <li>\n              <p>活动时间：</p>\n              <p class=\"p\">{{applyList.startTime}} - {{applyList.endTime}}</p>\n            </li>\n            <li>\n              <p>主讲人：</p>\n              <p>{{applyList.speaker}}</p>\n            </li>\n            <li>\n              <p>活动地点：</p>\n              <p>{{applyList.locationOfTeaching}}</p>\n            </li>\n            <li>\n              <p>报名人数：</p>\n              <p>{{applyList.numOfSignUp}}</p>\n            </li>\n          </ul>\n        </div>\n        <div class=\"background\">\n          <ul>\n            <li>\n              <h3>活动详情</h3>\n            </li>\n            <li>\n              <p v-html=\"applyList.detail\"></p>\n            </li>\n            <li>\n              <div class=\"pwith\" v-for=\"(i,index) in applyList.attachmentList\">\n                <p @click=\"showAttachment(i,index)\">{{i.name}}</p>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"bottom\" v-if=\"buttonShow\">\n        <button :class=\"pbotton\" :disabled=\"questionnaire\" @click=\"questionnaireSurvey()\">问卷调查</button>\n        <button class=\"pbotton1\" @click=\"clickToSign\">扫码打卡</button>\n        <button :class=\"pbotton2\" :disabled=\"questionnaire2\" @click=\"feedback()\">意见反馈</button>\n      </div>\n      <van-dialog\n        v-model=\"feedbackk\"\n        title=\"意见反馈\"\n        show-cancel-button\n        confirm-button-text=\"提交\"\n        :before-close=\"beforeClose\"\n      >\n        <van-cell-group>\n          <van-field\n            v-model=\"message\"\n            type=\"textarea\"\n            :placeholder=\"placeholder\"\n            maxlength=\"500\"\n            rows=\"1\"\n            autosize\n          />\n        </van-cell-group>\n      </van-dialog>\n      <div v-if=\"Dontsignup\">\n        <div class=\"bottom\">\n          <button class=\"Sign_up\" v-if=\"applying\" @click=\"applyClick()\" :disabled=\"disabled\">立即报名</button>\n          <button class=\"cancel\" v-if=\"!applying\" @click=\"cancelClick()\" :disabled=\"disabled\">取消报名</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/*活动详情*/\nexport default {\n  name: \"ActivitiesDetails\",\n  data() {\n    return {\n      applyList: [],\n      src: [],\n      buttonShow: false,\n      promptly: \"\",\n      Sign_up: \"\",\n      timestamp: \"\", // 服务器时间\n      applying: false,\n      disabled: false,\n      disabledCancel: false,\n      Dontsignup: false,\n      // isshow: true,\n      // isshoww: false,\n      pbotton: \"\",\n      pbotton1: \"\",\n      pbotton2: \"\",\n      questionnaire: false,\n      questionnaire1: false,\n      questionnaire2: false,\n      feedbackk: false, // 意见反馈\n      placeholder: \"建议或意见，不得超过500字\",\n      message: \"\",\n      imgList: [],\n      imgIndexMap: new Map(),\n      locationObj: {\n        locationDetail: \"正在获取当前位置\",\n        latitudeAndLongitude: \"\"\n      }\n    };\n  },\n  methods: {\n    onClickLeft() {\n      this.$store.state.activitiesDetailsObj = null;\n      this.utils.goBack(this);\n    },\n    clickToSign() { // 扫码打卡\n      this.sood();\n    },\n    sood() {\n      var dsMins =\n        (this.utils.getTime(this.$store.state.timestamp) -\n          this.utils.getTime(this.applyList.startTime)) /\n        3600000;\n      if (dsMins < -2) {\n        this.Toast(\"请在活动开始前两小时内打卡\");\n        return;\n      }\n\n      let appCallData = {\n        Command: \"CmdScanQrCode\",\n        Args: {\n          from: \"activeDetail\",\n          teachingId: this.applyList.id\n        }\n      };\n      this.webApp.WebCallApp(\"CmdScanQrCode\", {}, res => {\n        let obj = this.utils.getPrams(res);\n        if (this.applyList.id != obj.teachingId) {\n          return this.Toast(\"无效二维码\");\n        }\n        var params = {\n          qrCodeInfoJson: JSON.stringify(obj),\n          memberCaId: this.$store.state.userInfo.human.caId,\n          teachingId: this.applyList.id, //签到/签退经纬度\n          // latitudeLongitude: this.locationObj.latitudeAndLongitude,\n          // locationDetail: this.locationObj.locationDetail //  定位这个版本不需要\n\n        };\n \n        this.utils.ajax({\n          url: this.api.saveQrSignInOrSignOut,\n          method: \"POST\",\n          data: params,\n          success: data => {\n            this.Toast(\"打卡成功\");\n            console.log(\"打卡成功\");\n          }\n        });\n      });\n    },\n    location() { // 定位这个版本不需要\n      AMap.plugin(\"AMap.Geolocation\", () => {\n        var geolocation = new AMap.Geolocation({\n          enableHighAccuracy: true, // 是否使用高精度定位，默认：true\n          timeout: 5000, // 设置定位超时时间，默认：无穷大\n          buttonOffset: new AMap.Pixel(10, 20) // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\n        });\n        geolocation.getCurrentPosition();\n        AMap.event.addListener(geolocation, \"complete\", data => {\n          this.locationObj.locationDetail = data.formattedAddress;\n          this.locationObj.latitudeAndLongitude = `${data.position.lat},${\n            data.position.lng\n          }`;\n          this.locationObj.flage = true;\n          // this.sood();\n        });\n        AMap.event.addListener(geolocation, \"error\", err => {\n          // this.Toast(\"定位失败\");\n          // console.log(err);\n          this.locationObj.locationDetail = \"定位失败，请重新获取定位\";\n          if (err.message === \"Geolocation permission denied.\") {\n            this.Toast(\"请开启定位权限\");\n            this.locationObj.locationDetail = \"请开启定位权限\";\n          }\n          this.locationObj.flage = false;\n        });\n      });\n    },\n    pageDisplay() {\n      // 根据不同页面显示不同的按钮\n      if (\n        this.$store.state.activitiesDetailsObj.condition === \"teaching_activity\"\n      ) {\n        console.log(\"1\");\n\n        this.buttonShow = false;\n        this.Dontsignup = true;\n        this.getLeaveList(this.$store.state.activitiesDetailsObj.id);\n      } else if (\n        this.$store.state.activitiesDetailsObj.condition === \"ToStayIn\"\n      ) {\n        console.log(\"12\");\n        this.buttonShow = true;\n        this.Dontsignup = false;\n        this.getLeaveList(this.$store.state.activitiesDetailsObj.id);\n      }\n    },\n    getLeaveList(activityId) {\n      //发布活动\n      var param = {\n        id: activityId,\n        isPrceview: 1\n      };\n      this.utils.ajax({\n        url: this.api.activityDetail,\n        data: param,\n        method: \"POST\",\n        success: data => {\n          console.log(data, \"5555555555555\");\n          data.attachmentList.forEach((item, index) => {\n            if (this.utils.checkSuffix(item.name)) {\n              this.imgList.push(item.path);\n              this.imgIndexMap.set(index, this.imgList.length - 1);\n            }\n          });\n          // title = data.title;\n          this.applyList = data;\n          let startTime = new Date(this.applyList.startTime).getTime(); // 活动开始\n          let timestamp = new Date(this.$store.state.timestamp).getTime(); // 服务器时间\n          var sd = 7200000;\n          var hours = parseInt((sd % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n          if (this.$store.state.activitiesDetailsObj.condition === \"ToStayIn\") {\n          } else {\n            if (this.applyList.isSignUp === 0) {\n              // 如果为0是'否'不需要报名\n              this.Dontsignup = false;\n            }\n            if (this.applyList.isSignUp === 1) {\n              // 如果为1是'是'需要报名\n              this.Dontsignup = true;\n            }\n            if (this.applyList.joinFlag === 0) {\n              //  报名状态: 0否 1是 2取消\n              //  是否报名，0否 1是 2取消\n              this.applying = true;\n              console.log(\"需要报名\");\n            }\n            if (this.applyList.joinFlag === 1) {\n              this.applying = false;\n            }\n            if (this.applyList.joinFlag === 2) {\n              this.applying = true;\n            }\n            console.log(timestamp, \"服务器时间\");\n            console.log(startTime, \"活动开始\");\n            console.log(hours, \"小时\");\n            if (timestamp + sd < startTime && this.applyList.isSignUp === 1) {\n              //  活动开始前两小时可以报名\n              this.Dontsignup = true;\n            }\n            if (timestamp + sd < startTime && this.applyList.isSignUp === 0) {\n              this.Dontsignup = false;\n            }\n            if (timestamp + sd > startTime) {\n              this.Dontsignup = false;\n            }\n          }\n          console.log(\n            this.applyList.joinFlag,\n            \"oooooooooothis.applyList.joinFlag\",\n            this.applyList.isSignUp,\n            \"ssssssss\"\n          );\n          if (this.applyList.isHaveOpinion == 0) {\n            this.pbotton = \"pbotton\";\n            this.questionnaire = true;\n          } else if (this.applyList.isHaveOpinion == 1) {\n            this.pbotton = \"pbotton1\";\n            this.questionnaire = false;\n          }\n          if (startTime < timestamp) {\n            console.log(\"ksajdlas\");\n\n            this.pbotton2 = \"pbotton1\";\n            this.questionnaire2 = false;\n          }\n          if (startTime > timestamp) {\n            this.pbotton2 = \"pbotton\";\n            this.questionnaire2 = true;\n          }\n        }\n      });\n    },\n    showAttachment(attachment, index) {\n      if (this.utils.checkSuffix(attachment.name)) {\n        //图片进行预览\n        this.utils.imagePreview(this.imgList, this.imgIndexMap.get(index));\n      } else {\n        if (this.utils.isInAndroid() == false) {\n          this.Toast(\"请通过电脑进行查看或下载\");\n        } else {\n          console.log(\"调用app下载\");\n          var obj = {\n            name: attachment.name,\n            url: attachment.path\n          };\n          this.utils.downLoadFile(obj);\n        }\n      }\n    },\n    applyingY(flag, memberId, teachingId) {\n      var params = {\n        flag: flag,\n        memberId: memberId,\n        teachingId: teachingId\n      };\n      this.utils.ajax({\n        url: this.api.upOrCancelSignTeaching,\n        data: params,\n        method: \"POST\",\n        success: data => {\n          console.log(data, \"pqpwpqpw\");\n        }\n      });\n    },\n    applyClick() {\n      // 立即报名\n      this.applying = !this.applying;\n      console.log(111);\n      this.applyingY(\n        1,\n        this.$store.state.activitiesDetailsObj.memberCaId,\n        this.$store.state.activitiesDetailsObj.id\n      );\n    },\n    cancelClick() {\n      // 取消报名\n      this.applying = !this.applying;\n      this.applyingY(\n        2,\n        this.$store.state.activitiesDetailsObj.memberCaId,\n        this.$store.state.activitiesDetailsObj.id\n      );\n    },\n    feedback() {\n      // 意见反馈\n      this.feedbackk = true;\n    },\n    beforeClose(action, done) {\n      // 意见反馈\n      if (action === \"confirm\") {\n        // setTimeout(done, 1000);\n        console.log(this.message.length, \"12315555555\");\n        if (this.message == \"\") {\n          this.Toast(\"内容不能为空!\");\n          done(false);\n        } else if (this.message.length > 500) {\n          this.Toast(\"内容不能超过500字!\");\n          done(false);\n        } else {\n          // 请求提交接口\n          var params = {\n            teachingId: this.$store.state.activitiesDetailsObj.id,\n            memberCaId: this.$store.state.activitiesDetailsObj.memberCaId,\n            content: this.message\n          };\n          this.utils.ajax({\n            url: this.api.saveFeedBackForTeaching,\n            data: params,\n            method: \"POST\",\n            success: data => {}\n          });\n          done();\n        }\n      } else {\n        done();\n      }\n    },\n    questionnaireSurvey() {\n      // 问卷调查\n      this.$router.push({\n        name: \"questionnaire\",\n        params: { id: this.$store.state.activitiesDetailsObj.id }\n      });\n    }\n  },\n\n  created() {\n    this.pageDisplay();\n    console.log(\"ididididi\", this.$store.state.activitiesDetailsObj.memberCaId);\n  }\n};\n</script>\n\n<style scoped>\nh3,\np,\nul,\nli {\n  margin: 0;\n  padding: 0;\n}\n\n.heade {\n  background: white;\n}\n\n.heade_top {\n  width: 90%;\n  margin: 0 auto;\n  padding: 0.3rem 0;\n}\n\n.heade_top li {\n  display: flex;\n}\n\n.heade_top li p:nth-of-type(1) {\n  width: 70px;\n  text-align: right;\n}\n\n.heade_top li {\n  padding: 0.2rem 0;\n}\n\n.heade_top li p {\n  color: #888888;\n  font-size: 0.8rem;\n}\n\n.heade_top li .p {\n  color: #f6ae48;\n}\n\n.background {\n  background: white;\n  margin-top: 0.8rem;\n  padding: 0.3rem 0;\n  height: 29.5rem;\n}\n\n.background ul {\n  width: 90%;\n  margin: 0 auto;\n}\n\n.background ul li {\n  padding: 0.2rem 0;\n}\n\n.background ul li p {\n  line-height: 1.5rem;\n}\n\n.background ul li div p {\n  color: #187fe8;\n}\n\n.print {\n  width: 100%;\n  text-align: center;\n  padding: 0.5rem;\n}\n\n.saving {\n  padding: 1rem;\n}\n\n.bottom {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n\n  position: fixed;\n  bottom: 0;\n\n  text-align: center;\n}\n\n.bottom button {\n  width: 100%;\n  font-size: 1rem;\n  border: none;\n}\n\n.bottom .pbotton {\n  background: #ffffff;\n  padding: 0.5rem 0;\n  border-top: 1px solid #eeeeee;\n  border-bottom: 1px solid #eeeeee;\n  color: #d3d3d3;\n}\n\n.bottom .pbotton1 {\n  background: #1a7fe9;\n  padding: 0.5rem 0;\n  border-left: 1px solid #eeeeee;\n  color: white;\n}\n\n.Sign_up {\n  background: #1a7fe9 !important;\n  color: white !important;\n}\n\n.cancel {\n  background: #e1951b !important;\n  color: white !important;\n}\n\n.bottom button {\n  padding: 0.5rem 0;\n  width: 100%;\n  font-size: 1rem;\n  border: none;\n}\n\n.pwith {\n  word-wrap: break-word;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ActivitiesDetails.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{staticClass:\"header\",attrs:{\"title\":\"活动详情\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_vm._v(\" \"),_c('div',{staticClass:\"layout_content\"},[_c('div',[_c('div',{staticClass:\"heade\"},[_c('ul',{staticClass:\"heade_top\"},[_c('li',[_c('h3',[_vm._v(_vm._s(_vm.applyList.title))])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"活动时间：\")]),_vm._v(\" \"),_c('p',{staticClass:\"p\"},[_vm._v(_vm._s(_vm.applyList.startTime)+\" - \"+_vm._s(_vm.applyList.endTime))])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"主讲人：\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.applyList.speaker))])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"活动地点：\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.applyList.locationOfTeaching))])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"报名人数：\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.applyList.numOfSignUp))])])])]),_vm._v(\" \"),_c('div',{staticClass:\"background\"},[_c('ul',[_vm._m(0),_vm._v(\" \"),_c('li',[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.applyList.detail)}})]),_vm._v(\" \"),_c('li',_vm._l((_vm.applyList.attachmentList),function(i,index){return _c('div',{staticClass:\"pwith\"},[_c('p',{on:{\"click\":function($event){return _vm.showAttachment(i,index)}}},[_vm._v(_vm._s(i.name))])])}),0)])])]),_vm._v(\" \"),(_vm.buttonShow)?_c('div',{staticClass:\"bottom\"},[_c('button',{class:_vm.pbotton,attrs:{\"disabled\":_vm.questionnaire},on:{\"click\":function($event){return _vm.questionnaireSurvey()}}},[_vm._v(\"问卷调查\")]),_vm._v(\" \"),_c('button',{staticClass:\"pbotton1\",on:{\"click\":_vm.clickToSign}},[_vm._v(\"扫码打卡\")]),_vm._v(\" \"),_c('button',{class:_vm.pbotton2,attrs:{\"disabled\":_vm.questionnaire2},on:{\"click\":function($event){return _vm.feedback()}}},[_vm._v(\"意见反馈\")])]):_vm._e(),_vm._v(\" \"),_c('van-dialog',{attrs:{\"title\":\"意见反馈\",\"show-cancel-button\":\"\",\"confirm-button-text\":\"提交\",\"before-close\":_vm.beforeClose},model:{value:(_vm.feedbackk),callback:function ($$v) {_vm.feedbackk=$$v},expression:\"feedbackk\"}},[_c('van-cell-group',[_c('van-field',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.placeholder,\"maxlength\":\"500\",\"rows\":\"1\",\"autosize\":\"\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1)],1),_vm._v(\" \"),(_vm.Dontsignup)?_c('div',[_c('div',{staticClass:\"bottom\"},[(_vm.applying)?_c('button',{staticClass:\"Sign_up\",attrs:{\"disabled\":_vm.disabled},on:{\"click\":function($event){return _vm.applyClick()}}},[_vm._v(\"立即报名\")]):_vm._e(),_vm._v(\" \"),(!_vm.applying)?_c('button',{staticClass:\"cancel\",attrs:{\"disabled\":_vm.disabled},on:{\"click\":function($event){return _vm.cancelClick()}}},[_vm._v(\"取消报名\")]):_vm._e()])]):_vm._e()],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_c('h3',[_vm._v(\"活动详情\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-27547e5e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ActivitiesDetails.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27547e5e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ActivitiesDetails.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivitiesDetails.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivitiesDetails.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27547e5e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ActivitiesDetails.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-27547e5e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ActivitiesDetails.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}