webpackJsonp([26],{DLfC:function(e,i){},mT08:function(e,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=a("ifoU"),r=a.n(t),d={name:"ManualAuditDetail",components:{PassAndNoPass:a("eu7k").a},data:function(){return{tab:0,error:"请选择待审核的登记手册",imgIndexMap:new r.a,imgList:[],shwoFile:{flag:!1},moduleManual:[],metailDetail:{},manualAuditList:[]}},created:function(){var e=this,i=this.$route.params;this.tab=i.tab,console.log(i);var a=i.oneLevelType,t=i.twoLevelType;this.moduleManualDetail(t),this.metailDetail=i.item,this.metailDetail.oneLevelTypeText=this.utils.getValueByKey(this.$store.state.oneLevelType,a),this.metailDetail.twoLevelTypeText=this.utils.getValueByKey(this.$store.state.twoLevelType,t),this.metailDetail.isTubeBedText=this.utils.getValueByKey(this.$store.state.trueOrFalse,i.item.isTubeBed),this.metailDetail.isWriteBigCaseText=this.utils.getValueByKey(this.$store.state.trueOrFalse,i.item.isWriteBigCase),this.metailDetail.visitTypeText=this.utils.getValueByKey(this.$store.state.visitType,i.item.visitType),this.metailDetail.guideWay=this.utils.getValueByKey([{value:"座谈",key:1},{value:"工作汇报",key:2},{value:"读书报告",key:3},{value:"科研论文指导",key:4},{value:"病案讨论",key:5},{value:"临床技能指导",key:6},{value:"人文指导",key:7},{value:"其他",key:8}],this.metailDetail.guideWay);var r=[{value:"术者",key:1},{value:"一助",key:2},{value:"二助",key:3},{value:"三助",key:4},{value:"观看",key:5}];19==t&&(r=[{value:"第一研究员",key:6},{value:"第二研究员",key:7},{value:"第三研究员",key:8},{value:"第四研究员",key:9},{value:"第五研究员",key:10},{value:"第六研究员",key:11}]),this.metailDetail.joinRole=this.utils.getValueByKey(r,this.metailDetail.joinRole),this.metailDetail.thesisType=this.utils.getValueByKey([{value:"专题",key:1},{value:"辩论",key:2},{value:"综述",key:3},{value:"综合",key:4}],this.metailDetail.thesisType),this.metailDetail.type=this.utils.getValueByKey([{value:"专业期刊发表的文章",key:1},{value:"学术会议交流文章",key:2},{value:"院（所）学术会议交流文章",key:3},{value:"提交文章",key:4}],this.metailDetail.type),this.metailDetail.date=this.metailDetail.date?this.utils.formatDate(this.metailDetail.date,"yyyy-MM-dd").replace(/-/g,"/"):"";var d=this.metailDetail.filesVOs,l=["content","lapseToCondition","patientInfo","finalDiagnosis","fourWaysDiagnosis","assistInspect","prescription","doctorAdvice","doctorAdvice"];this.moduleManual.forEach(function(e){l.forEach(function(i){e.name==i&&(e.type="textarea")})}),d.length&&d.forEach(function(i,a){i.path;var t=i.name,r=t.substr(t.lastIndexOf(".")+1);i.type=r,e.utils.checkSuffix(i.name)&&(e.imgList.push(i.path),e.imgIndexMap.set(a,e.imgList.length-1))}),this.manualAuditList.push(this.metailDetail)},methods:{onClickLeft:function(){this.$store.state.tabActive=this.tab,this.utils.goBack(this)},showAttachment:function(e,i){this.shwoFile.url=e.path,this.shwoFile.name=e.name,this.shwoFile.flag=!0},donloadFile:function(){console.log(this.shwoFile.url),this.utils.downLoad(this.shwoFile)},isImg:function(e){return!!(/.jpg/.test(e)||/.jpeg/.test(e)||/.png/.test(e)||/.gif/.test(e))},manualAudit:function(e){console.log("auditObj---\x3e--",e);var i=e.type;"pass"==i?this.btnType=1:"unPass"==i&&(this.btnType=0),this.auditNote=e.data||"",this.auditAjax()},getParams:function(){var e={},i=[],a=this.$route.params.item.id;return console.log("--id---\x3e--",a),i.push(a),e.ids=i,1==this.btnType?e.auditNote="":0==this.btnType&&(e.auditNote=this.auditNote),e},auditAjax:function(){var e=this,i="",a=this;0==this.btnType?i=this.api.manualReject:1==this.btnType&&(i=this.api.manualApproval);var t=this.getParams(this.btnType);this.utils.ajax({url:i,data:t,method:"POST",success:function(i){setTimeout(function(){0==a.btnType?a.Toast("审核不通过成功"):1==a.btnType&&a.Toast("审核通过成功")},200),e.utils.goBack(e)},error:function(i){console.log("error--\x3e--",i),e.Toast(i.error)}},!0)},moduleManualDetail:function(e){var i=[];switch(+e){case 1:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"住院号",name:"admissionNumber",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!0},{field:"时间",name:"date",required:!1},{field:"床号",name:"bedNo",required:!1},{field:"管床",name:"isTubeBedText",required:!0},{field:"病历内容",name:"content",required:!1},{field:"附件上传",name:"filesVOs",required:!1}];break;case 2:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"住院号",name:"admissionNumber",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!0},{field:"次要诊断",name:"secondaryDiagnosis",required:!1},{field:"时间",name:"date",required:!1},{field:"床号",name:"bedNo",required:!1},{field:"书写大病历",name:"isWriteBigCaseText",required:!0},{field:"管床",name:"isTubeBedText",required:!0},{field:"就诊类型",name:"visitTypeText",required:!1},{field:"技能操作",name:"skill",required:!1},{field:"参与角色",name:"joinRole",required:!1},{field:"内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 3:case 4:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"就诊号",name:"visitNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!0},{field:"诊治内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 5:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"住院号",name:"admissionNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"操作名称",name:"skill",required:!0},{field:"操作内容",name:"content",required:!1},{field:"附件上传",name:"filesVOs",required:!1}];break;case 6:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"住院号",name:"admissionNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"手术名称",name:"skill",required:!0},{field:"参与角色",name:"joinRole",required:!1},{field:"手术内容",name:"content",required:!1},{field:"附件上传",name:"filesVOs",required:!1}];break;case 7:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"就诊号",name:"visitNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!1},{field:"操作名称",name:"skill",required:!0},{field:"操作内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 8:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"就诊号",name:"visitNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!1},{field:"手术名称",name:"skill",required:!0},{field:"参与角色",name:"joinRole",required:!1},{field:"手术内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 9:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"就诊号",name:"visitNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!1},{field:"操作名称",name:"skill",required:!0},{field:"检查内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 10:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"就诊号",name:"visitNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!1},{field:"操作名称",name:"skill",required:!0},{field:"抢救内容",name:"content",required:!1},{field:"转归情况",name:"lapseToCondition",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 11:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"查房名称",name:"heading",required:!1},{field:"时长",name:"burningTime",required:!1},{field:"主讲人",name:"speaker",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 13:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"时间",name:"date",required:!1},{field:"地点",name:"location",required:!1},{field:"学习内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 14:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"时间",name:"date",required:!1},{field:"奖励内容",name:"content",required:!1},{field:"奖励部门",name:"awardDepartment",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 15:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"讲座名称",name:"heading",required:!1},{field:"时间",name:"date",required:!1},{field:"地点",name:"location",required:!1},{field:"讲座内容",name:"content",required:!1},{field:"时长",name:"burningTime",required:!1},{field:"主讲人",name:"speaker",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 16:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"讨论主题",name:"heading",required:!1},{field:"时间",name:"date",required:!1},{field:"地点",name:"location",required:!1},{field:"病人信息",name:"patientInfo",required:!1},{field:"讨论内容",name:"content",required:!1},{field:"时长",name:"burningTime",required:!1},{field:"主持人",name:"speaker",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 17:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"讨论主题",name:"heading",required:!1},{field:"时间",name:"date",required:!1},{field:"地点",name:"location",required:!1},{field:"病人信息",name:"patientInfo",required:!1},{field:"入院时间",name:"admissionDate",required:!1},{field:"死亡时间",name:"demiseDate",required:!1},{field:"最后诊断",name:"finalDiagnosis",required:!1},{field:"讨论内容",name:"content",required:!1},{field:"时长",name:"burningTime",required:!1},{field:"主持人",name:"speaker",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 18:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"会诊名称",name:"heading",required:!1},{field:"时间",name:"date",required:!1},{field:"地点",name:"location",required:!1},{field:"病人信息",name:"patientInfo",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!0},{field:"会诊内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 19:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"科研名称",name:"heading",required:!1},{field:"科研内容",name:"content",required:!1},{field:"带头人",name:"principal",required:!1},{field:"科研角色",name:"joinRole",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 20:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"论文名称",name:"heading",required:!1},{field:"发表时间",name:"date",required:!1},{field:"发表刊物",name:"publications",required:!1},{field:"类型",name:"type"},{field:"论文类型",name:"thesisType",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 21:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"时间",name:"date",required:!1},{field:"指导方式",name:"guideWay",required:!1},{field:"指导内容",name:"content",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 22:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"就诊号",name:"visitNumber",required:!1},{field:"时间",name:"date",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!0},{field:"望闻问切",name:"fourWaysDiagnosis",required:!1},{field:"辅助检查",name:"assistInspect",required:!1},{field:"诊治内容",name:"content",required:!1},{field:"处方",name:"prescription",required:!1},{field:"医嘱",name:"doctorAdvice",required:!1},{field:"附件",name:"filesVOs",required:!1}];break;case 23:i=[{field:"轮转科室",name:"departmentName",required:!0},{field:"分类",name:"oneLevelTypeText",required:!1},{field:"手册类型",name:"twoLevelTypeText",required:!1},{field:"病人姓名",name:"patientName",required:!1},{field:"住院号",name:"admissionNumber",required:!1},{field:"主要诊断",name:"mainDiagnosis",required:!0},{field:"时间",name:"date",required:!1},{field:"床号",name:"bedNo",required:!1},{field:"住院志内容",name:"doctorAdvice",required:!1},{field:"附件",name:"filesVOs",required:!1}]}this.moduleManual=i}}},l={render:function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"warp manualAuditDetail"},[a("van-nav-bar",{staticClass:"header",attrs:{title:"手册详情",fixed:"","left-arrow":""},on:{"click-left":e.onClickLeft}}),e._v(" "),a("div",{staticClass:"layout_content"},[a("div",{staticClass:"manualAuditTable"},[a("h3",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),a("ul",{staticClass:"list"},e._l(e.moduleManual,function(i){return a("li",{class:{file:"filesVOs"==i.name}},["filesVOs"==i.name?a("div",[a("div",{staticClass:"fileUp"},[e._v("文件上传")]),e._v(" "),a("div",{staticClass:"fileBox"},e._l(e.metailDetail.filesVOs,function(i,t){return a("div",{staticClass:"fileItem",on:{click:function(a){return e.showAttachment(i,t)}}},["jpg"==i.type||"jpeg"==i.type||"gif"==i.type||"png"==i.type?a("div",{staticClass:"imgIcon"},[a("img",{attrs:{src:i.path,alt:i.name}})]):a("div",{staticClass:"imgIcon"},[a("i",[a("van-icon",{attrs:{name:"records"}})],1)])])}),0)]):a("div",["textarea"==i.type?a("div",{staticClass:"contentitem"},[a("div",{staticClass:"first_field",domProps:{innerHTML:e._s(i.field)}}),e._v(" "),a("textarea",{staticClass:"textarea",attrs:{rows:"3",disabled:""}},[e._v(e._s(e.metailDetail[i.name]))])]):a("div",{staticClass:"item"},[a("div",{staticClass:"left"},[a("span",{domProps:{innerHTML:e._s(i.field)}}),e._v(" "),i.required?a("strong",{staticClass:"red"},[e._v("*")]):e._e()]),e._v(" "),a("div",{staticClass:"right"},[a("div",{domProps:{innerHTML:e._s(e.metailDetail[i.name])}})])])])])}),0)]),e._v(" "),0==e.tab?a("PassAndNoPass",{attrs:{list:e.manualAuditList,error:e.error},on:{auditHandle:e.manualAudit}}):e._e()],1),e._v(" "),a("van-dialog",{attrs:{"confirm-button-text":"关闭"},model:{value:e.shwoFile.flag,callback:function(i){e.$set(e.shwoFile,"flag",i)},expression:"shwoFile.flag"}},[a("div",{staticClass:"maxheightbox"},[e.isImg(e.shwoFile.url)?a("img",{attrs:{src:e.shwoFile.url,width:"100%"}}):e._e(),e._v(" "),e.isImg(e.shwoFile.url)?e._e():a("div",{staticClass:"fileImg"},[a("van-icon",{attrs:{name:"description"}})],1),e._v(" "),e.isImg(e.shwoFile.url)?e._e():a("div",{staticClass:"title-file"},[e._v("该文件类型暂不支持查看")])])])],1)},staticRenderFns:[]};var n=a("VU/8")(d,l,!1,function(e){a("DLfC")},"data-v-79420f49",null);i.default=n.exports}});
//# sourceMappingURL=26.f9d4044ad3895445d10a.js.map