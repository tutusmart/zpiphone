{"version":3,"sources":["webpack:///src/view/TCMmentoring/TeacherAttendance.vue","webpack:///./src/view/TCMmentoring/TeacherAttendance.vue?60a3","webpack:///./src/view/TCMmentoring/TeacherAttendance.vue"],"names":["TeacherAttendance","name","components","ViewList","data","listData","listObj","list","field","leftClass","locationObj","locationDetail","latitudeAndLongitude","methods","onClickLeft","this","utils","goBack","onClickRight","v","console","log","location","_this","AMap","plugin","geolocation","Geolocation","enableHighAccuracy","timeout","buttonOffset","Pixel","getCurrentPosition","event","addListener","formattedAddress","position","lat","lng","flage","sood","err","message","Toast","_this2","getTime","$store","state","timestamp","$route","params","startTime","applyList","teachingId","webApp","WebCallApp","res","obj","getPrams","qrCodeInfoJson","stringify_default","memberCaId","userInfo","human","caId","latitudeLongitude","ajax","url","api","saveQrSignInOrSignOut","method","success","setTimeout","tabclass","_this3","auditFlag","currentPage","Math","ceil","length","pageSize","queryAuditList","content","signInTime","map","i","created","TCMmentoring_TeacherAttendance","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","z-index","attrs","data-v-0f4718e4","on","click","_v","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/32.5fb41c509aab4512136b.js","sourcesContent":["<template>\r\n  <div class>\r\n    <div\r\n      data-v-0f4718e4\r\n      class=\"header van-nav-bar van-nav-bar--fixed van-hairline--bottom\"\r\n      style=\"z-index: 1;\"\r\n    >\r\n      <div data-v-0f4718e4 class=\"van-nav-bar__left\" @click=\"onClickLeft\">\r\n        <i data-v-0f4718e4 class=\"van-icon van-icon-arrow-left van-nav-bar__arrow\">\r\n          <!---->\r\n        </i>\r\n      </div>\r\n      <div data-v-0f4718e4 class=\"van-nav-bar__title van-ellipsis tosa\">跟师考勤</div>\r\n      <div data-v-0f4718e4 class=\"van-nav-bar__right \" @click=\"onClickRight\"><van-icon name=\"scan\" size=\"1.8em\" /></div>\r\n    </div>\r\n\r\n    <div class=\"layout_content\">\r\n      <ViewList :listObj=\"listObj\" :listData=\"listData\"></ViewList>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ViewList from \"@/components/ViewList\";\r\n\r\nexport default {\r\n  name: \"TeacherAttendance\",\r\n  components: {\r\n    ViewList: ViewList\r\n  },\r\n  data() {\r\n    return {\r\n      listData: [],\r\n      listObj: {\r\n        list: [\r\n          { field: \"导师姓名：\", name: \"name\", leftClass: \"gray\" },\r\n          { field: \"签到时间：\", name: \"signInTime\", leftClass: \"gray\" }\r\n        ]\r\n      },\r\n      locationObj: {\r\n        locationDetail: \"正在获取当前位置\",\r\n        latitudeAndLongitude: \"\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.utils.goBack(this);\r\n    },\r\n    onClickRight(v) {\r\n      console.log(1111);\r\n      this.location();\r\n    },\r\n    location() {\r\n      AMap.plugin(\"AMap.Geolocation\", () => {\r\n        var geolocation = new AMap.Geolocation({\r\n          enableHighAccuracy: true, // 是否使用高精度定位，默认：true\r\n          timeout: 5000, // 设置定位超时时间，默认：无穷大\r\n          buttonOffset: new AMap.Pixel(10, 20) // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\r\n        });\r\n        geolocation.getCurrentPosition();\r\n        AMap.event.addListener(geolocation, \"complete\", data => {\r\n          this.locationObj.locationDetail = data.formattedAddress;\r\n          this.locationObj.latitudeAndLongitude = `${data.position.lat},${\r\n            data.position.lng\r\n          }`;\r\n          this.locationObj.flage = true;\r\n          this.sood();\r\n        });\r\n        AMap.event.addListener(geolocation, \"error\", err => {\r\n          // this.Toast(\"定位失败\");\r\n          // console.log(err);\r\n          this.locationObj.locationDetail = \"定位失败，请重新获取定位\";\r\n          if (err.message === \"Geolocation permission denied.\") {\r\n            this.Toast(\"请开启定位权限\");\r\n            this.locationObj.locationDetail = \"请开启定位权限\";\r\n          }\r\n          this.locationObj.flage = false;\r\n        });\r\n      });\r\n    },\r\n    sood() {\r\n      var dsMins =\r\n        (this.utils.getTime(this.$store.state.timestamp) -\r\n          this.utils.getTime(this.$route.params.startTime)) /\r\n        3600000;\r\n      if (dsMins < -2) {\r\n        this.Toast(\"请在活动开始前两小时内打卡\");\r\n        return;\r\n      }\r\n      let appCallData = {\r\n        Command: \"CmdScanQrCode\",\r\n        Args: {\r\n          from: \"activeDetail\",\r\n          teachingId: this.applyList.teachingId\r\n        }\r\n      };\r\n      this.webApp.WebCallApp(\"CmdScanQrCode\", {}, res => {\r\n        let obj = this.utils.getPrams(res);\r\n        if (this.applyList.teachingId != obj.teachingId) {\r\n          return this.Toast(\"无效二维码\");\r\n        }\r\n        console.log(this.locationObj.latitudeAndLongitude, \"555555555555555\");\r\n        console.log(this.locationObj.locationDetail, \"464646464\");\r\n        var params = {\r\n          qrCodeInfoJson: JSON.stringify(obj),\r\n          memberCaId: this.$store.state.userInfo.human.caId,\r\n          teachingId: this.applyList.teachingId, //签到/签退经纬度\r\n          latitudeLongitude: this.locationObj.latitudeAndLongitude,\r\n          locationDetail: this.locationObj.locationDetail //  签到/签退地点详情\r\n          // latitudeLongitude: \"39.982597,116.436353\",\r\n          // locationDetail: \"北京市朝阳区太阳宫镇文学院路40煤炭信息研究院\"\r\n        };\r\n        console.log(params, \"ajsd\");\r\n        this.utils.ajax({\r\n          url: this.api.saveQrSignInOrSignOut,\r\n          method: \"POST\",\r\n          data: params,\r\n          success: data => {\r\n            this.Toast(\"打卡成功\");\r\n            setTimeout(() => {\r\n              this.tabclass();\r\n            }, 1000);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    tabclass() {\r\n      let params = {\r\n        auditFlag: \"0\",\r\n        currentPage:\r\n          Math.ceil(this.listData.length / this.$store.state.pageSize) + 1,\r\n        pageSize: this.$store.state.pageSize\r\n      };\r\n      this.utils.ajax({\r\n        url: this.api.queryAuditList,\r\n        method: \"POST\",\r\n        data: params,\r\n        success: data => {\r\n          console.log(\"ssssggg\", data);\r\n          data.content = [\r\n            {\r\n              name: \"张三\",\r\n              signInTime: \"2019-05-09 上午\"\r\n            }\r\n          ];\r\n          if (data.content.length) {\r\n            const content = data.content.map(i => {\r\n              const item = i;\r\n              //   item.name = item.studentVO.name;\r\n              //   item.startDatee = item.startDate + \"-\" + item.endDate;\r\n              return item;\r\n            });\r\n            this.listData = content;\r\n          }\r\n        }\r\n      });\r\n      // }\r\n    }\r\n  },\r\n  created() {\r\n    this.tabclass();\r\n  }\r\n};\r\n</script>\r\n<style  scoped>\r\n.van-nav-bar__right {\r\n  color: white;\r\n}\r\n.van-search {\r\n  padding: 0.35rem;\r\n  margin: 0;\r\n}\r\n.van-search .van-cell {\r\n  padding: 0.1rem;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/TCMmentoring/TeacherAttendance.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('div',{staticClass:\"header van-nav-bar van-nav-bar--fixed van-hairline--bottom\",staticStyle:{\"z-index\":\"1\"},attrs:{\"data-v-0f4718e4\":\"\"}},[_c('div',{staticClass:\"van-nav-bar__left\",attrs:{\"data-v-0f4718e4\":\"\"},on:{\"click\":_vm.onClickLeft}},[_c('i',{staticClass:\"van-icon van-icon-arrow-left van-nav-bar__arrow\",attrs:{\"data-v-0f4718e4\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"van-nav-bar__title van-ellipsis tosa\",attrs:{\"data-v-0f4718e4\":\"\"}},[_vm._v(\"跟师考勤\")]),_vm._v(\" \"),_c('div',{staticClass:\"van-nav-bar__right \",attrs:{\"data-v-0f4718e4\":\"\"},on:{\"click\":_vm.onClickRight}},[_c('van-icon',{attrs:{\"name\":\"scan\",\"size\":\"1.8em\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"layout_content\"},[_c('ViewList',{attrs:{\"listObj\":_vm.listObj,\"listData\":_vm.listData}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5df6fa96\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/TCMmentoring/TeacherAttendance.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5df6fa96\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TeacherAttendance.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TeacherAttendance.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TeacherAttendance.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5df6fa96\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TeacherAttendance.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5df6fa96\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/TCMmentoring/TeacherAttendance.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}