{"version":3,"sources":["webpack:///src/view/activity/LookAttendance.vue","webpack:///./src/view/activity/LookAttendance.vue?4efa","webpack:///./src/view/activity/LookAttendance.vue"],"names":["LookAttendance","name","data","reason","noPassShow","imgList","imgIndexMap","map_default","a","activity","methods","onClickLeft","this","utils","goBack","queryActivityDetail","_this","ajax","url","api","auditActivityDetail","$route","params","method","success","attachmentList","forEach","item","index","checkSuffix","push","path","set","length","noPass","beforeClose","action","done","Toast","duration","message","audit","auditFlag","reminder","_this2","auditNote","teachingIds","id","saveTeachingAuditResult","setTimeout","showAttachment","attachment","imagePreview","get","isInAndroid","console","log","obj","downLoadFile","created","activity_LookAttendance","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","fixed","left-arrow","on","click-left","$event","_v","_s","startTime","endTime","speaker","locationOfTeaching","numOfSignUp","domProps","innerHTML","detail","_l","click","show-cancel-button","before-close","model","value","callback","$$v","expression","type","placeholder","rows","autosize","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.e018377d2b33f5fda5f9.js","sourcesContent":["<template>\n  <div class>\n    <van-nav-bar title=\"活动详情\" class=\"header\" @click-left=\"onClickLeft()\" fixed left-arrow/>\n    <div class=\"head layout_content\">\n      <div class=\"cont\">\n        <h3>{{activity.title}}</h3>\n        <ul>\n          <li>\n            <p>活动时间：</p>\n            <p class=\"activity-time\">{{activity.startTime}} ~ {{activity.endTime}}</p>\n          </li>\n          <li>\n            <p>主讲人：</p>\n            <p>{{activity.speaker}}</p>\n          </li>\n          <li>\n            <p>地点：</p>\n            <p>{{activity.locationOfTeaching}}</p>\n          </li>\n          <li>\n            <p>报名人数：</p>\n            <p class=\"p1\">{{activity.numOfSignUp}}</p>\n          </li>\n        </ul>\n      </div>\n      <div class=\"empty\"></div>\n      <div class=\"cont\">\n        <p>活动详情：</p>\n        <p v-html=\"activity.detail\"></p>\n        <p>上传资料：</p>\n        <div class=\"datum\">\n          <div class=\"img a\" v-for=\"(item,index) in activity.attachmentList\">\n            <p @click=\"showAttachment(item,index)\">{{item.name}}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"button\">\n      <p class=\"pass\" @click=\"audit(1,'审核通过')\">审核通过</p>\n      <p class=\"noPass\" @click=\"noPass()\">审核不通过</p>\n    </div>\n\n    <van-dialog v-model=\"noPassShow\" show-cancel-button :before-close=\"beforeClose\">\n      <p class=\"cause\">审核意见</p>\n      <van-field\n        v-model=\"reason\"\n        type=\"textarea\"\n        placeholder=\"请输入审核意见\"\n        class=\"textarea\"\n        rows=\"1\"\n        autosize\n      />\n    </van-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"LookAttendance\",\n  data() {\n    return {\n      reason: \"\",\n      noPassShow: false,\n      imgList: [],\n      imgIndexMap: new Map(),\n      activity: {}\n    };\n  },\n  //方法集合\n  methods: {\n    onClickLeft() {\n      this.utils.goBack(this);\n    },\n    queryActivityDetail() {\n      //活动详情\n      this.utils.ajax({\n        url: this.api.auditActivityDetail,\n        data: this.$route.params,\n        method: \"POST\",\n        success: data => {\n          //获取所有图片、并且记录原始index和现有index对应关系\n          data.attachmentList.forEach((item, index) => {\n            if (this.utils.checkSuffix(item.name)) {\n              this.imgList.push(item.path);\n              this.imgIndexMap.set(index, this.imgList.length - 1);\n            }\n          });\n          this.activity = data;\n        }\n      });\n    },\n    noPass() {\n      //不通过\n      this.noPassShow = true;\n    },\n    beforeClose(action, done) {\n      if (action === \"confirm\") {\n        //确定\n        if (!this.reason) {\n          this.Toast({ duration: 500, message: \"请填写审核意见\" });\n          done(false);\n          return;\n        }\n\n        if (this.reason.length > 100) {\n          return;\n        }\n\n        this.audit(2, \"审核不通过\");\n        done();\n      } else {\n        //取消\n        this.reason = \"\"; //清空原因\n        done();\n      }\n    },\n    audit(auditFlag, reminder) {\n      let params = {\n        auditFlag: auditFlag,\n        auditNote: this.reason,\n        teachingIds: [this.$route.params.id]\n      };\n\n      this.utils.ajax({\n        method: \"post\",\n        data: params,\n        url: this.api.saveTeachingAuditResult,\n        success: data => {\n          setTimeout(() => {\n            this.Toast(reminder);\n          }, 300);\n          this.utils.goBack(this);\n        }\n      });\n    },\n    showAttachment(attachment, index) {\n      if (this.utils.checkSuffix(attachment.name)) {\n        //图片进行预览\n        this.utils.imagePreview(this.imgList, this.imgIndexMap.get(index));\n      } else {\n        if (this.utils.isInAndroid() == false) {\n          this.Toast(\"请通过电脑进行查看或下载\");\n        } else {\n          console.log(\"调用app下载\");\n          var obj = {\n            name: attachment.name,\n            url: attachment.path\n          };\n          this.utils.downLoadFile(obj);\n        }\n      }\n    }\n  },\n  created() {\n    this.queryActivityDetail();\n  }\n};\n</script>\n<style scoped>\n.head {\n  background: white;\n}\n\n.cont {\n  width: 90%;\n  margin: 0 auto;\n  padding: 0.5rem 0;\n}\n\n.head p,\nh3 {\n  padding: 0;\n  margin: 0;\n}\n\n.cont ul li p {\n  color: #9a9a9a;\n}\n\n.cont ul li p:nth-of-type(1) {\n  width: 70px;\n  text-align: right;\n}\n\n.activity-time {\n  color: #facd8a !important;\n  line-height: 1.3rem;\n}\n\n.p1 {\n  line-height: 1.3rem;\n}\n\n.cont ul li {\n  display: flex;\n}\n\n.head p {\n  font-size: 0.815rem;\n  padding: 0.2rem 0;\n}\n\n.look {\n  display: flex;\n  justify-content: space-between;\n}\n\n.datum {\n  width: 100%;\n  /*display: flex;*/\n  /*justify-content: space-between;*/\n}\n\n.cause {\n  text-align: center;\n  padding: 0.2rem;\n  border-bottom: 1px solid #f8f8f8;\n}\n\n.button {\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  position: fixed;\n  bottom: 0;\n  color: white;\n  font-size: 0.875rem;\n}\n\n.button p {\n  width: 50%;\n  text-align: center;\n  padding: 0.5rem 0;\n  margin: 0;\n}\n\n.button .pass {\n  background: #007acc;\n}\n\n.button .noPass {\n  background: #cd3333;\n}\n\n.empty {\n  padding: 0.3rem 0;\n  width: 100%;\n  background: #f0f0f0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/activity/LookAttendance.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('van-nav-bar',{staticClass:\"header\",attrs:{\"title\":\"活动详情\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.onClickLeft()}}}),_vm._v(\" \"),_c('div',{staticClass:\"head layout_content\"},[_c('div',{staticClass:\"cont\"},[_c('h3',[_vm._v(_vm._s(_vm.activity.title))]),_vm._v(\" \"),_c('ul',[_c('li',[_c('p',[_vm._v(\"活动时间：\")]),_vm._v(\" \"),_c('p',{staticClass:\"activity-time\"},[_vm._v(_vm._s(_vm.activity.startTime)+\" ~ \"+_vm._s(_vm.activity.endTime))])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"主讲人：\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.activity.speaker))])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"地点：\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.activity.locationOfTeaching))])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"报名人数：\")]),_vm._v(\" \"),_c('p',{staticClass:\"p1\"},[_vm._v(_vm._s(_vm.activity.numOfSignUp))])])])]),_vm._v(\" \"),_c('div',{staticClass:\"empty\"}),_vm._v(\" \"),_c('div',{staticClass:\"cont\"},[_c('p',[_vm._v(\"活动详情：\")]),_vm._v(\" \"),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.activity.detail)}}),_vm._v(\" \"),_c('p',[_vm._v(\"上传资料：\")]),_vm._v(\" \"),_c('div',{staticClass:\"datum\"},_vm._l((_vm.activity.attachmentList),function(item,index){return _c('div',{staticClass:\"img a\"},[_c('p',{on:{\"click\":function($event){return _vm.showAttachment(item,index)}}},[_vm._v(_vm._s(item.name))])])}),0)])]),_vm._v(\" \"),_c('div',{staticClass:\"button\"},[_c('p',{staticClass:\"pass\",on:{\"click\":function($event){return _vm.audit(1,'审核通过')}}},[_vm._v(\"审核通过\")]),_vm._v(\" \"),_c('p',{staticClass:\"noPass\",on:{\"click\":function($event){return _vm.noPass()}}},[_vm._v(\"审核不通过\")])]),_vm._v(\" \"),_c('van-dialog',{attrs:{\"show-cancel-button\":\"\",\"before-close\":_vm.beforeClose},model:{value:(_vm.noPassShow),callback:function ($$v) {_vm.noPassShow=$$v},expression:\"noPassShow\"}},[_c('p',{staticClass:\"cause\"},[_vm._v(\"审核意见\")]),_vm._v(\" \"),_c('van-field',{staticClass:\"textarea\",attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入审核意见\",\"rows\":\"1\",\"autosize\":\"\"},model:{value:(_vm.reason),callback:function ($$v) {_vm.reason=$$v},expression:\"reason\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cb93b4f4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/activity/LookAttendance.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cb93b4f4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./LookAttendance.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./LookAttendance.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./LookAttendance.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cb93b4f4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./LookAttendance.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cb93b4f4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/activity/LookAttendance.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}