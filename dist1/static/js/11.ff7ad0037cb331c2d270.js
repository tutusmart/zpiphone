webpackJsonp([11],{"/2+I":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Gu7T"),n=i.n(a),s={name:"ActivitiesAttended",components:{},data:function(){return{applyList:[],loading:!1,finished:!1,finishedText:"",error:!1,params:{currentPage:1,pageSize:this.$store.state.pageSize,isStart:1,isMobile:1}}},methods:{onLoad:function(){this.getLeaveList()},switchover:function(t){console.log("itemmmmm",t),this.$store.state.activitiesDetailsObj={id:t.id,condition:"ToStayIn",memberCaId:t.memberCaId},this.$router.push({name:"ActivitiesDetails"})},tabclass:function(t){this.$router.push({name:"PunchCards",params:{id:t.id,condition:"ToStayIn",memberCaId:t.memberCaId,startTime:t.startTime,endTime:t.endTime}})},cancel:function(t){console.log(t,"ppoiooo"),this.applyingY(2,t.memberCaId,t.id)},applyingY:function(t,e,i){var a=this,n={flag:t,memberId:e,teachingId:i};this.utils.ajax({url:this.api.upOrCancelSignTeaching,data:n,method:"POST",success:function(t){console.log(t,"pqpwpqpwp"),setTimeout(function(){a.Toast("取消报名成功")},300),a.getLeaveList(1)}})},getLeaveList:function(t){var e=this;console.log(this.$store.state.pageSize);var i={currentPage:1,pageSize:this.$store.state.pageSize,isMobile:1,waitingJoin:1};this.utils.ajax({url:this.api.queryOwnTeachingList,data:i,method:"POST",success:function(i){i.content.length?i.totalPages>e.params.currentPage?e.params.currentPage++:(e.finished=!0,e.finishedText="没有更多了"):(e.finishedText="",e.finished=!0),e.loading=!1,i.content.map(function(t){var i=t,a=e.utils.getTime(i.startTime),n=e.utils.getTime(i.endTime),s=e.utils.getTime(e.$store.state.timestamp);parseInt(2);return s<a&&(i.started="未开始"),s>a&&s<n&&(i.started="进行中"),i.havenot="未开始"==i.started?"havenot":"进行中"==i.started?"havenotSt":"havenot",1==i.isSignUp&&a>s&&1===i.joinFlag?(i.state=1,i.clasState="but_cancel"):(i.state=2,i.clasState="but_issue"),i.classIssue=1===i.state?"but_issue":(i.state,"but_cancel"),i.classDelete=1===i.state?"but_issue":(i.state,"but_cancel"),i.disabled="but_issue"===i.classIssue,i.disabledRem="but_issue"===i.classDelete,i.disabledCall="but_issue"===i.clasState,i}),console.log(i.content.started,"ywywyywy"),t?e.applyList=i.content:(e.applyList=[].concat(n()(e.applyList),n()(i.content)),console.log(e.applyList,"kkkkkkkkksk"))}})}},created:function(){}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"activity_content"},[i("div",{staticClass:"activty_left_content"},[i("van-list",{attrs:{error:t.error,"immediate-check":"","error-text":"请求失败，点击重新加载",finished:t.finished,"finished-text":t.finishedText,offset:50},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.applyList,function(e,a){return i("div",[i("p",{on:{click:function(i){return t.switchover(e)}}},[t._v(t._s(e.title))]),t._v(" "),i("p",{on:{click:function(i){return t.switchover(e)}}},[t._v("活动时间: "+t._s(e.startTime)+" - "+t._s(e.endTime))]),t._v(" "),i("p",{on:{click:function(i){return t.switchover(e)}}},[t._v("发布时间: "+t._s(e.timeOfRelease))]),t._v(" "),i("div",{staticClass:"people"},[i("p",{on:{click:function(i){return t.switchover(e)}}},[t._v("报名人数："+t._s(e.numOfSignUp))]),t._v(" "),i("p",{class:e.havenot},[t._v(t._s(e.started))])]),t._v(" "),i("div",{staticClass:"font_color"},[i("button",{class:e.clasState,attrs:{disabled:e.disabledCall},on:{click:function(i){return t.cancel(e)}}},[t._v("取消报名")]),t._v(" "),i("button",{staticClass:"but_cancel",on:{click:function(i){return t.tabclass(e)}}},[t._v("打卡详情")])])])}),0)],1)])])},staticRenderFns:[]};var c={data:function(){return{applyListt:[],loading:!1,finished:!1,error:!1,finishedText:"没有更多了"}},methods:{getLeaveList:function(){var t=this,e={currentPage:Math.ceil(this.applyListt.length/this.$store.state.pageSize)+1,pageSize:this.$store.state.pageSize,joined:1,isMobile:1};this.utils.ajax({url:this.api.queryOwnTeachingList,data:e,method:"POST",success:function(i){console.log(i.content.length),i.content.length&&(t.applyListt=[].concat(n()(t.applyListt),n()(i.content))),t.loading=!1,e.currentPage>=i.totalPages&&(t.finished=!0)}})},attendDetails:function(t){this.$router.push({name:"ActiveParticipation",params:{id:t.id,condition:"ToStayIn",memberCaId:t.memberCaId}})},onLoad:function(){this.getLeaveList()}},created:function(){},mounted:function(){}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("van-list",{attrs:{finished:t.finished,error:t.error,"error-text":"请求失败，点击重新加载","finished-text":t.finishedText,"immediate-check":"",offset:50},on:{"update:error":function(e){t.error=e},load:function(e){return t.onLoad()}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("div",{staticClass:"attend"},t._l(t.applyListt,function(e){return i("div",{staticClass:"disola"},[i("ul",[i("li",{on:{click:function(i){return t.attendDetails(e)}}},[i("p",{staticClass:"p"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"time"},[i("p",[t._v("活动时间：")]),t._v(" "),i("p",[t._v(t._s(e.startTime)+" - "+t._s(e.endTime))])]),t._v(" "),i("div",{staticClass:"time"},[i("p",[t._v("报名人数：")]),t._v(" "),i("p",[t._v(t._s(e.numOfSignUp))])])])])])}),0)])],1)},staticRenderFns:[]};var l={name:"TeachingActivities",components:{ActivitiesAttended:i("VU/8")(s,o,!1,function(t){i("XHVB")},"data-v-0ddf9069",null).exports,ActivityParticipated:i("VU/8")(c,r,!1,function(t){i("k6H/")},"data-v-4d8db2a8",null).exports},data:function(){return{applyList:[],applyListt:[],active:0}},created:function(){},methods:{onClickLeft:function(){this.utils.goBack(this)},change:function(){document.querySelector(".layout_content").scrollTop=0}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-nav-bar",{staticClass:"header",attrs:{title:"教学活动",fixed:"","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),i("div",{staticClass:"layout_content"},[i("van-tabs",{attrs:{swipeable:"","title-active-color":"#1a7fe9",color:"#5fa4ec","line-height":2},on:{change:t.change},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tab",{attrs:{title:"待参加"}},[i("ActivitiesAttended",{ref:"onLoad"})],1),t._v(" "),i("van-tab",{attrs:{title:"已参加"}},[i("div",{staticClass:"attend"},[i("ActivityParticipated")],1)])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(l,d,!1,function(t){i("Vvr/")},"data-v-4114d68c",null);e.default=u.exports},"Vvr/":function(t,e){},XHVB:function(t,e){},"k6H/":function(t,e){}});
//# sourceMappingURL=11.ff7ad0037cb331c2d270.js.map