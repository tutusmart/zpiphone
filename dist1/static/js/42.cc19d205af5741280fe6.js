webpackJsonp([42],{"5SfF":function(t,i){},iEen:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("mvHQ"),a=s.n(e),n={name:"PunchCards",data:function(){return{applyList:[],startTime:"",endTimee:"",name:"",endTime:"",drawing:"",signin:"",src:"",showTime:!1,showOutTime:!1,locationObj:{locationDetail:"正在获取当前位置",latitudeAndLongitude:""},dimensionCode:"",classHour:0}},created:function(){this.getLeaveList(this.$route.params.id),this.$store.state.dimensionCode=""},methods:{onClickLeft:function(){this.utils.goBack(this)},getLeaveList:function(t){var i=this,s={humanId:this.$store.state.userInfo.human.caId,teachingId:t};this.utils.ajax({url:this.api.queryTeachingReceiverVO,data:s,method:"POST",success:function(t){if(i.applyList=t,""==t.signInDate||""==t.signOutDate)i.classHour="0";else{var s=i.utils.getTime(i.applyList.signInDate),e=((i.utils.getTime(i.applyList.signOutDate)-s)/3600/1e3).toFixed();i.classHour=e}i.startTime=i.$route.params.startTime,i.endTimee=i.$route.params.endTime;var a=i.utils.getTime(i.$route.params.startTime),n=i.utils.getTime(i.$route.params.endTime),o=new Date(i.$store.state.timestamp).getTime();if(""==i.applyList.signInDate)i.name="未签到",i.src="drawingg",i.showTime=!1;else{i.showTime=!0;var l=i.utils.getTime(i.applyList.signInDate);a>l?(i.name="正常",i.src="img1"):a<l&&(i.name="迟到",i.src="img"),""==i.applyList.signInDate&&o>a&&(i.name="迟到",i.src="img")}if(""==i.applyList.signOutDate)i.signin="未签退",i.drawing="drawingg",i.showOutTime=!1;else{i.showOutTime=!0;var r=i.utils.getTime(i.applyList.signOutDate);n>r&&(i.signin="早退",i.drawing="img"),n<r&&(i.signin="正常",i.drawing="img1")}""==i.applyList.signOutDate&&(i.signin="未签退",i.drawing="drawingg")}})},scan:function(){this.sood()},location:function(){var t=this;AMap.plugin("AMap.Geolocation",function(){var i=new AMap.Geolocation({enableHighAccuracy:!0,timeout:5e3,buttonOffset:new AMap.Pixel(10,20)});i.getCurrentPosition(),AMap.event.addListener(i,"complete",function(i){t.locationObj.locationDetail=i.formattedAddress,t.locationObj.latitudeAndLongitude=i.position.lat+","+i.position.lng,t.locationObj.flage=!0}),AMap.event.addListener(i,"error",function(i){t.locationObj.locationDetail="定位失败，请重新获取定位","Geolocation permission denied."===i.message&&(t.Toast("请开启定位权限"),t.locationObj.locationDetail="请开启定位权限"),t.locationObj.flage=!1})})},sood:function(){var t=this;if((this.utils.getTime(this.$store.state.timestamp)-this.utils.getTime(this.$route.params.startTime))/36e5<-2)this.Toast("请在活动开始前两小时内打卡");else{this.applyList.teachingId;this.webApp.WebCallApp("CmdScanQrCode",{},function(i){var s=t.utils.getPrams(i);if(t.applyList.teachingId!=s.teachingId)return t.Toast("无效二维码");var e={qrCodeInfoJson:a()(s),memberCaId:t.$store.state.userInfo.human.caId,teachingId:t.applyList.teachingId};t.utils.ajax({url:t.api.saveQrSignInOrSignOut,method:"POST",data:e,success:function(i){t.Toast("打卡成功"),setTimeout(function(){t.getLeaveList(t.$route.params.id)},1e3)}})})}}}},o={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("van-nav-bar",{staticClass:"header",attrs:{title:"打卡详情",fixed:"","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),s("div",{staticClass:"layout_content"},[s("div",[s("div",{staticClass:"clock"},[s("div",{staticClass:"phase"},[s("ul",[s("li",[s("p",{staticClass:"p"},[t._v("开始时间")]),t._v(" "),s("p",[t._v(t._s(t.startTime))])]),t._v(" "),t.showTime?s("li",{staticClass:"lio"},[s("p",[t._v("签到时间")]),t._v(" "),s("p",[t._v(t._s(t.applyList.signInDate))])]):t._e(),t._v(" "),s("li",{staticClass:"li"},[s("div",{staticClass:"img",attrs:{id:t.src}}),t._v(" "),s("p",[t._v(t._s(t.name))])])])]),t._v(" "),s("div",{staticClass:"phase"},[s("ul",[s("li",[s("p",{staticClass:"p"},[t._v("结束时间")]),t._v(" "),s("p",[t._v(t._s(t.endTimee))])]),t._v(" "),t.showOutTime?s("li",{staticClass:"lio"},[s("p",[t._v("签退时间")]),t._v(" "),s("p",[t._v(t._s(t.applyList.signOutDate))])]):t._e(),t._v(" "),s("li",{staticClass:"li"},[s("div",{staticClass:"img",attrs:{id:t.drawing}}),t._v(" "),s("p",[t._v(t._s(t.signin))])])])])]),t._v(" "),s("ul",{staticClass:"study"},[s("li",[s("p",[t._v("实际学习")]),t._v(" "),s("p",[s("span",[t._v(t._s(t.classHour))]),t._v(" 小时\n          ")])])])]),t._v(" "),s("div",{staticClass:"punch",on:{click:function(i){return t.scan()}}},[t._v("扫码打卡")])])],1)},staticRenderFns:[]};var l=s("VU/8")(n,o,!1,function(t){s("5SfF")},"data-v-2693a08c",null);i.default=l.exports}});
//# sourceMappingURL=42.cc19d205af5741280fe6.js.map