{"version":3,"sources":["webpack:///src/components/ManualAuditList.vue","webpack:///./src/components/ManualAuditList.vue?b10d","webpack:///./src/components/ManualAuditList.vue","webpack:///src/components/ManualAudit.vue","webpack:///./src/components/ManualAudit.vue?2f2a","webpack:///./src/components/ManualAudit.vue"],"names":["ManualAuditList","name","components","PassAndNoPass","data","errorTip","loading","finished","error","title","currentPage","startTime","this","utils","formatDate","Date","getTime","startTimeShow","replace","currentDate","$store","state","timestamp","timeShow","auditNote","manualAuditList","currentIndex","tab","tabPageFlag","tabFlg","methods","onLoad","getData","value","_this","Math","ceil","length","pageSize","params","auditFlags","auditDate","ajax","url","api","pagingEnrollmentAuditList","method","success","transformData","content","concat","totalElements","totalPages","dataResult","_this2","forEach","element","selected","twoLevelTypeText","getValueByKey","twoLevelType","traineeMajorCodeText","majors","traineeMajorCode","createDateText","createDate","auditDateText","auditFlagText","auditStatus","auditFlag","formatter","type","pickerType","getParams","ids","checkedList","ele","index","push","id","btnType","auditAjax","manualReject","manualApproval","setTimeout","Toast","_error","console","log","filter","manualAudit","auditObj","timeSelected","conformDate","cancleDate","manualAuditClick","item","viewManualDetail","e","stopPropagation","i","$router","oneLevelType","created","props","components_ManualAuditList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","is-link","on","click","_v","error-text","finished-text","offset","update:error","$event","load","model","callback","$$v","expression","_l","manualAuditItem","class","active","_s","studentName","_e","departmentName","auditHumanName","green","red","blue","list","auditHandle","position","confirm","cancel","staticRenderFns","ManualAudit","__webpack_require__","normalizeComponent","ssrContext","tabFlag","onClickLeft","tabActive","goBack","change","document","querySelector","scrollTop","components_ManualAudit","fixed","left-arrow","click-left","sticky","offset-top","swipeable","title-active-color","color","line-height","ref","ManualAudit_Component","ManualAudit_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/14.4f6305784db7b10a2fe5.js","sourcesContent":["<template>\r\n  <div class=\"manualAuditCont\">\r\n    <div class=\"auditTime\">\r\n      <van-cell :title=\"title\" is-link :value=\"startTimeShow\" @click=\"timeSelected\"/>\r\n    </div>\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      :error.sync=\"error\"\r\n      error-text=\"请求失败，点击重新加载\"\r\n      finished-text=\"没有更多了\"\r\n      :offset=\"50\"\r\n      @load=\"onLoad\"\r\n    >\r\n        <div class = \"manualAuditList\">\r\n           <ul>\r\n             <li v-for=\"(manualAuditItem,index) in manualAuditList\" :class=\"{'active': manualAuditItem.selected}\"  @click=\"manualAuditClick(manualAuditItem)\">\r\n                <div class = \"item\">\r\n                     <span class=\"title\">学员 :</span><span class=\"text\">{{manualAuditItem.studentName}}</span>\r\n                </div>\r\n\r\n                <div class = \"item\" v-if=\"tab == 0\">\r\n                     <span class=\"title\">专业 :</span><span class=\"text\">{{manualAuditItem.traineeMajorCodeText}}</span>\r\n                </div>\r\n\r\n                <div class = \"item\" v-if=\"tab == 0\">\r\n                     <span class=\"title\">轮转科室 :</span><span class=\"text\">{{manualAuditItem.departmentName}}</span>\r\n                </div>\r\n\r\n                <div class = \"item\">\r\n                     <span class=\"title\">手册类型 :</span><span class=\"text\">{{manualAuditItem.twoLevelTypeText}}</span>\r\n                </div>\r\n\r\n                <div class = \"item\" v-if=\"tab == 1\">\r\n                     <span class=\"title\">审核人 :</span><span class=\"text\">{{manualAuditItem.auditHumanName}}</span>\r\n                </div>\r\n                <div class = \"item\" v-if=\"tab == 1\">\r\n                    <span class=\"title\">审核状态 :</span>\r\n                    <span class=\"text\" :class=\"{'green':manualAuditItem.auditFlag == 1,'red':manualAuditItem.auditFlag == 2,'blue':manualAuditItem.auditFlag == 0||manualAuditItem.auditFlag==3 }\">{{manualAuditItem.auditFlagText}}</span>\r\n                </div>\r\n\r\n                <div class = \"item last\" >\r\n                  <div v-if=\"tab==0\">\r\n                      <span class=\"title\">提交时间 :</span><span class=\"text\">{{manualAuditItem.createDateText}}</span>\r\n                  </div>\r\n                  <div v-if=\"tab==1\">\r\n                      <span class=\"title\">审核时间 :</span><span class=\"text\">{{manualAuditItem.auditDateText}}</span>\r\n                  </div>\r\n                  <div class=\"button-box\">\r\n                      <span class=\"a\" @click=\"viewManualDetail($event, manualAuditItem )\">查看</span>\r\n                  </div>\r\n                </div>\r\n             </li>\r\n           </ul>\r\n        </div>\r\n    </van-list>\r\n      <PassAndNoPass v-if=\"tab==0\" :class=\"tab == 0 ? 'mt' : ''\"   @auditHandle=\"manualAudit\" :error=\"errorTip\" :list=\"manualAuditList\" ></PassAndNoPass>\r\n      <van-popup v-model=\"timeShow\" position=\"bottom\">\r\n          <van-datetime-picker\r\n            v-model=\"currentDate\"\r\n            type=\"year-month\"\r\n            @confirm=\"conformDate\"\r\n            @cancel=\"cancleDate\"\r\n            :formatter = \"formatter\"\r\n          />\r\n      </van-popup>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport PassAndNoPass from \"@/components/PassAndNoPass\";\r\nexport default {\r\n  name: \"ManualAuditList\",\r\n  components: {\r\n    \"PassAndNoPass\": PassAndNoPass\r\n  },\r\n  data() {\r\n\r\n    var startTime = this.utils.formatDate(new Date().getTime(), \"yyyy-MM\");\r\n    var startTimeShow = this.utils.formatDate(new Date().getTime(), \"yyyy-MM\").replace(/-/g,\"/\");\r\n    //var startDate = this.utils.formatDate(new Date().getTime(), \"yyyy-MM-dd\");\r\n    return {\r\n      errorTip: \"请选择待审核的登记手册\",\r\n      loading: false,\r\n      finished: false,\r\n      error: false,\r\n      title: \"审核时间\",\r\n      currentPage: 1,\r\n      startTime: startTime,\r\n      startTimeShow: startTimeShow,\r\n      //startDate: startDate,\r\n      currentDate: new Date(this.$store.state.timestamp.replace(/-/g,\"/\")),\r\n      timeShow: false,\r\n      //auditShow: false, // 审核弹出框\r\n      auditNote: \"\", // 审核意见\r\n      manualAuditList: [],\r\n      currentIndex: this.tab,\r\n      tabPageFlag : this.tabFlg\r\n    };\r\n  },\r\n  methods: {\r\n    onLoad() {\r\n      //console.log('onload-->--');\r\n      //console.log('this.tabPageFlag-->',this.tabPageFlag);\r\n      // if(this.tabPageFlag) {\r\n      //    this.currentPage = 1;\r\n      //    this.tabPageFlag = false;\r\n      // }\r\n      this.getData();\r\n    },\r\n    getData(value) {  //value 代表当前页。\r\n      var _this = this;\r\n      this.currentPage = Math.ceil(this.manualAuditList.length /  this.$store.state.pageSize);\r\n      this.currentPage = this.currentPage + 1;\r\n      if( value ) {\r\n         this.currentPage = 1 ;\r\n      }\r\n      var params = {\r\n        currentPage: value || this.currentPage,\r\n        pageSize: this.$store.state.pageSize,\r\n      };\r\n\r\n      if( this.currentIndex == 0 ) {\r\n        params.auditFlags = ['0'];\r\n      } else if( this.currentIndex == 1) {\r\n        params.auditFlags = ['1','2'];\r\n      }\r\n      params.auditDate = this.startTime;\r\n      this.utils.ajax({\r\n        url: this.api.pagingEnrollmentAuditList,\r\n        data: params,\r\n        method: \"POST\",\r\n        success: data => {\r\n\r\n          _this.manualAuditList = params.currentPage ==1 ?_this.transformData(data.content): _this.manualAuditList.concat(_this.transformData(data.content));\r\n          //console.log('_this.manualAuditList',_this.manualAuditList);\r\n\r\n          // _this.manualAuditList.forEach((ele,index)=>{\r\n          //     if(ele.filesVOs.length) {\r\n          //          console.log('index--->---', index);\r\n          //     }\r\n          // });\r\n          _this.totalElements = data.totalElements;\r\n          _this.totalPages = data.totalPages;\r\n          // 加载状态结束\r\n          _this.loading = false;\r\n          if(params.currentPage >= _this.totalPages) {\r\n            _this.finished = true;\r\n          }else {\r\n            _this.finished = false;\r\n          }\r\n        }\r\n      },true);\r\n    },\r\n    transformData(dataResult) {\r\n      dataResult.forEach( element => {\r\n          element.selected = false;\r\n          //手册类型\r\n          element.twoLevelTypeText = this.utils.getValueByKey(this.$store.state.twoLevelType, element.twoLevelType);\r\n          //专业\r\n          element.traineeMajorCodeText = this.utils.getValueByKey(this.$store.state.majors, element.traineeMajorCode);\r\n          //提交时间\r\n          element.createDateText = element.createDate? this.utils.formatDate(element.createDate).replace(/-/g,\"/\"):'';\r\n          //审核时间\r\n          element.auditDateText = element.auditDate? this.utils.formatDate(element.auditDate).replace(/-/g,\"/\"):'';\r\n          //审核状态\r\n          element.auditFlagText = this.utils.getValueByKey(this.$store.state.auditStatus, element.auditFlag)||'';\r\n      });\r\n      return dataResult;\r\n    },\r\n    formatter(type, value) {\r\n      return this.utils.pickerType(type, value);\r\n    },\r\n    getParams() {\r\n      var checkedList = this.checkedList();\r\n      var params = {};\r\n      var ids = [];\r\n      var url = \"\";\r\n      checkedList.forEach(( ele, index )=>{\r\n        //console.log('--ele-->',ele);\r\n        //console.log('--index--',index);\r\n        ids.push( ele.id );\r\n      });\r\n      params.ids = ids;\r\n      if( this.btnType == 1 ) { // 审核通过 按钮\r\n          params.auditNote = \"\";\r\n      } else if (this.btnType == 0 ) { // 审核不通过\r\n          params.auditNote = this.auditNote;\r\n      }\r\n      return params;\r\n    },\r\n    auditAjax() {\r\n      var _this = this;\r\n      var url = '';\r\n      if( this.btnType == 0) {\r\n          url = this.api.manualReject;\r\n      }else if( this.btnType == 1 ) {\r\n          url = this.api.manualApproval;\r\n      }\r\n      var params = this.getParams(this.btnType);\r\n      this.utils.ajax({\r\n          url:  url,\r\n          data: params,\r\n          method: \"POST\",\r\n          success: data => {\r\n             setTimeout(() => {\r\n                _this.Toast('审核成功');\r\n             }, 100);\r\n             _this.getData(1);\r\n          },\r\n          error: error => {\r\n             console.log('error-->--',error);\r\n             _this.Toast(error.error);\r\n          }\r\n        },true);\r\n    },\r\n    //获取选中的数据\r\n    checkedList() {\r\n      var checkedList = this.manualAuditList.filter( (ele) => {\r\n          return ele.selected == true;\r\n      });\r\n      //console.log('checkedList--->--', checkedList);\r\n      return checkedList;\r\n    },\r\n    manualAudit(auditObj) {\r\n      //console.log('auditObj--->--',auditObj);\r\n      var type = auditObj.type;\r\n      if(type == 'pass') {\r\n        this.btnType = 1;\r\n        var checkedList = this.checkedList();\r\n        if(checkedList.length == 0) {\r\n          this.Toast(this.error);\r\n          return;\r\n        }\r\n      } else if( type == 'unPass' ) {\r\n        this.btnType = 0;\r\n      }\r\n      this.auditNote = auditObj.data||'';\r\n      this.auditAjax();\r\n    },\r\n    timeSelected() {\r\n      this.timeShow = true;\r\n\r\n    },\r\n    conformDate(value) {\r\n      this.startTime = this.utils.formatDate(value.getTime(),'yyyy-MM');\r\n      //this.startDate = this.utils.formatDate(value.getTime(),'yyyy-MM-dd');\r\n      this.startTimeShow = this.startTime.replace(/-/g, \"/\");\r\n      console.log(\"xxxxxx\")\r\n      this.getData(1);\r\n      this.cancleDate();\r\n    },\r\n    cancleDate() {\r\n      //alert('时间取消');\r\n      this.timeShow = false;\r\n    },\r\n    manualAuditClick(item) {\r\n      if(this.tab == 0 ) {\r\n        item.selected = !item.selected;\r\n      }\r\n    },\r\n\r\n    viewManualDetail(e, item) {\r\n      e.stopPropagation();\r\n      this.manualAuditList.forEach(i => {\r\n        i.selected = false;\r\n      });\r\n      item.selected = true;\r\n      this.$router.push({ name: \"ManualAuditDetail\", params: { oneLevelType: item.oneLevelType, twoLevelType:item.twoLevelType,tab: this.tab, item: item } });\r\n      //this.$store.state.EditRegisterNum = item.twoLevelType+'';\r\n      //this.$router.push({ name: \"EditRegister\",params: { id: item.id}});\r\n    }\r\n  },\r\n  created() {\r\n    if (this.tab) {\r\n      this.title = \"审核时间\";\r\n    } else {\r\n      this.title = \"提交时间\";\r\n    }\r\n  },\r\n  props: [\"tab\",\"tabFlg\"]\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* .manualAuditCont {\r\n  margin-bottom: 1.6rem;\r\n} */\r\n.manualAuditList {\r\n  background: #fff;\r\n}\r\n\r\n.auditTime {\r\n  border-bottom: 1px solid #ddd;\r\n  padding-left: 0.3rem;\r\n  background: #fff;\r\n}\r\n.auditBox {\r\n  margin: 0 0.8rem;\r\n}\r\n.manualAuditList li {\r\n  padding: 0.9375rem;\r\n  position: relative;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.manualAuditList li.active {\r\n  background: #eef9ff;\r\n}\r\n\r\n.manualAuditList li.active:before {\r\n  content: \"\";\r\n  width: 0;\r\n  height: 0;\r\n  border-width: 1.8rem 1.8rem 0 0;\r\n  border-style: solid;\r\n  border-color: #62afff transparent transparent transparent;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n.manualAuditList li .item {\r\n  line-height: 2rem;\r\n}\r\n\r\n.manualAuditList li .item .title {\r\n  display: inline-block;\r\n  width: 4.375rem;\r\n  text-align: right;\r\n  margin-right: 5px;\r\n  color: #969799;\r\n}\r\n\r\n.manualAuditList li .item.last {\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: flex;\r\n  -webkit-box-pack: justify;\r\n  -webkit-justify-content: space-between;\r\n  justify-content: space-between;\r\n}\r\n.button-box {\r\n  text-align: center;\r\n}\r\n.mt {\r\n   margin-top: 2rem;\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ManualAuditList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"manualAuditCont\"},[_c('div',{staticClass:\"auditTime\"},[_c('van-cell',{attrs:{\"title\":_vm.title,\"is-link\":\"\",\"value\":_vm.startTimeShow},on:{\"click\":_vm.timeSelected}})],1),_vm._v(\" \"),_c('van-list',{attrs:{\"finished\":_vm.finished,\"error\":_vm.error,\"error-text\":\"请求失败，点击重新加载\",\"finished-text\":\"没有更多了\",\"offset\":50},on:{\"update:error\":function($event){_vm.error=$event},\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_c('div',{staticClass:\"manualAuditList\"},[_c('ul',_vm._l((_vm.manualAuditList),function(manualAuditItem,index){return _c('li',{class:{'active': manualAuditItem.selected},on:{\"click\":function($event){return _vm.manualAuditClick(manualAuditItem)}}},[_c('div',{staticClass:\"item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"学员 :\")]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(manualAuditItem.studentName))])]),_vm._v(\" \"),(_vm.tab == 0)?_c('div',{staticClass:\"item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"专业 :\")]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(manualAuditItem.traineeMajorCodeText))])]):_vm._e(),_vm._v(\" \"),(_vm.tab == 0)?_c('div',{staticClass:\"item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"轮转科室 :\")]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(manualAuditItem.departmentName))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"手册类型 :\")]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(manualAuditItem.twoLevelTypeText))])]),_vm._v(\" \"),(_vm.tab == 1)?_c('div',{staticClass:\"item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"审核人 :\")]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(manualAuditItem.auditHumanName))])]):_vm._e(),_vm._v(\" \"),(_vm.tab == 1)?_c('div',{staticClass:\"item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"审核状态 :\")]),_vm._v(\" \"),_c('span',{staticClass:\"text\",class:{'green':manualAuditItem.auditFlag == 1,'red':manualAuditItem.auditFlag == 2,'blue':manualAuditItem.auditFlag == 0||manualAuditItem.auditFlag==3 }},[_vm._v(_vm._s(manualAuditItem.auditFlagText))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"item last\"},[(_vm.tab==0)?_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"提交时间 :\")]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(manualAuditItem.createDateText))])]):_vm._e(),_vm._v(\" \"),(_vm.tab==1)?_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"审核时间 :\")]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(manualAuditItem.auditDateText))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"button-box\"},[_c('span',{staticClass:\"a\",on:{\"click\":function($event){return _vm.viewManualDetail($event, manualAuditItem )}}},[_vm._v(\"查看\")])])])])}),0)])]),_vm._v(\" \"),(_vm.tab==0)?_c('PassAndNoPass',{class:_vm.tab == 0 ? 'mt' : '',attrs:{\"error\":_vm.errorTip,\"list\":_vm.manualAuditList},on:{\"auditHandle\":_vm.manualAudit}}):_vm._e(),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.timeShow),callback:function ($$v) {_vm.timeShow=$$v},expression:\"timeShow\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"year-month\",\"formatter\":_vm.formatter},on:{\"confirm\":_vm.conformDate,\"cancel\":_vm.cancleDate},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-78291edb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ManualAuditList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-78291edb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ManualAuditList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ManualAuditList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ManualAuditList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78291edb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ManualAuditList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-78291edb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ManualAuditList.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"manualAudit\">\r\n    <van-nav-bar title=\"手册审核\" class=\"header\" fixed left-arrow @click-left=\"onClickLeft\"/>\r\n    <div class=\"layout_content\">\r\n        <van-tabs v-model=\"active\" sticky  :offset-top=\"40\"  swipeable title-active-color=\"#1a7fe9\" color=\"#5fa4ec\" :line-height=\"2\" @change=\"change\">\r\n            <van-tab title=\"待审核\">\r\n              <ManualAuditList :tab=\"active\"  :tabFlg =\"tabFlag\"  ref=\"mychild1\"></ManualAuditList>\r\n            </van-tab>\r\n            <van-tab title=\"已审核\">\r\n              <ManualAuditList :tab=\"active\" :tabFlg =\"tabFlag\"   ref=\"mychild2\"></ManualAuditList>\r\n            </van-tab>\r\n        </van-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/*手册审核*/\r\n\r\nimport ManualAuditList from \"@/components/ManualAuditList\";\r\nexport default {\r\n  name: \"ManualAudit\",\r\n  components: {\r\n    ManualAuditList: ManualAuditList\r\n  },\r\n  data() {\r\n    return {\r\n      active: 0,\r\n      //firstLoad: false,\r\n      tabFlag: true\r\n    };\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$store.state.tabActive = 0;\r\n      this.utils.goBack(this);\r\n    },\r\n    change(index, title) {\r\n      //console.log('change');\r\n      document.querySelector(\".layout_content\").scrollTop = 0;\r\n      this.active = index;\r\n      this.$store.state.tabActive = this.active;\r\n      // this.tabFlag = true;  //第一次页面加载的标志\r\n      // //第一次切换tab 不加载\r\n      // if (this.firstLoad) {\r\n      //   if (index == 0) {\r\n      //     this.$refs.mychild1.getData(1);\r\n      //   } else {\r\n      //     this.$refs.mychild2.getData(1);\r\n      //   }\r\n      // }\r\n      // this.firstLoad = true;\r\n    }\r\n  },\r\n  created() {\r\n    this.active = this.$store.state.tabActive;\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n/* .footer {\r\n      width: 100%;\r\n      position: fixed;\r\n      bottom: 0;\r\n    }\r\n    .foot {\r\n      text-align: center;\r\n    } */\r\n\r\n.btnBox {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin: 0.5rem;\r\n}\r\n.auditNote {\r\n  border: 1px solid #ddd;\r\n}\r\n.button {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  position: fixed;\r\n  bottom: 0;\r\n  color: white;\r\n  font-size: 0.875rem;\r\n}\r\n.button p {\r\n  width: 50%;\r\n  text-align: center;\r\n  padding: 0.5rem 0;\r\n  margin: 0;\r\n}\r\n\r\n.button .pass {\r\n  background: #007acc;\r\n}\r\n\r\n.button .notPass {\r\n  background: #cd3333;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/ManualAudit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"manualAudit\"},[_c('van-nav-bar',{staticClass:\"header\",attrs:{\"title\":\"手册审核\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_vm._v(\" \"),_c('div',{staticClass:\"layout_content\"},[_c('van-tabs',{attrs:{\"sticky\":\"\",\"offset-top\":40,\"swipeable\":\"\",\"title-active-color\":\"#1a7fe9\",\"color\":\"#5fa4ec\",\"line-height\":2},on:{\"change\":_vm.change},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tab',{attrs:{\"title\":\"待审核\"}},[_c('ManualAuditList',{ref:\"mychild1\",attrs:{\"tab\":_vm.active,\"tabFlg\":_vm.tabFlag}})],1),_vm._v(\" \"),_c('van-tab',{attrs:{\"title\":\"已审核\"}},[_c('ManualAuditList',{ref:\"mychild2\",attrs:{\"tab\":_vm.active,\"tabFlg\":_vm.tabFlag}})],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-26be509e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ManualAudit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-26be509e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ManualAudit.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ManualAudit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ManualAudit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-26be509e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ManualAudit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-26be509e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ManualAudit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}