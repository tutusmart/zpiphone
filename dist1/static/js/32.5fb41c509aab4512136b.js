webpackJsonp([32],{I3UD:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("mvHQ"),n=i.n(e),o={name:"TeacherAttendance",components:{ViewList:i("p2g1").a},data:function(){return{listData:[],listObj:{list:[{field:"导师姓名：",name:"name",leftClass:"gray"},{field:"签到时间：",name:"signInTime",leftClass:"gray"}]},locationObj:{locationDetail:"正在获取当前位置",latitudeAndLongitude:""}}},methods:{onClickLeft:function(){this.utils.goBack(this)},onClickRight:function(t){console.log(1111),this.location()},location:function(){var t=this;AMap.plugin("AMap.Geolocation",function(){var a=new AMap.Geolocation({enableHighAccuracy:!0,timeout:5e3,buttonOffset:new AMap.Pixel(10,20)});a.getCurrentPosition(),AMap.event.addListener(a,"complete",function(a){t.locationObj.locationDetail=a.formattedAddress,t.locationObj.latitudeAndLongitude=a.position.lat+","+a.position.lng,t.locationObj.flage=!0,t.sood()}),AMap.event.addListener(a,"error",function(a){t.locationObj.locationDetail="定位失败，请重新获取定位","Geolocation permission denied."===a.message&&(t.Toast("请开启定位权限"),t.locationObj.locationDetail="请开启定位权限"),t.locationObj.flage=!1})})},sood:function(){var t=this;if((this.utils.getTime(this.$store.state.timestamp)-this.utils.getTime(this.$route.params.startTime))/36e5<-2)this.Toast("请在活动开始前两小时内打卡");else{this.applyList.teachingId;this.webApp.WebCallApp("CmdScanQrCode",{},function(a){var i=t.utils.getPrams(a);if(t.applyList.teachingId!=i.teachingId)return t.Toast("无效二维码");console.log(t.locationObj.latitudeAndLongitude,"555555555555555"),console.log(t.locationObj.locationDetail,"464646464");var e={qrCodeInfoJson:n()(i),memberCaId:t.$store.state.userInfo.human.caId,teachingId:t.applyList.teachingId,latitudeLongitude:t.locationObj.latitudeAndLongitude,locationDetail:t.locationObj.locationDetail};console.log(e,"ajsd"),t.utils.ajax({url:t.api.saveQrSignInOrSignOut,method:"POST",data:e,success:function(a){t.Toast("打卡成功"),setTimeout(function(){t.tabclass()},1e3)}})})}},tabclass:function(){var t=this,a={auditFlag:"0",currentPage:Math.ceil(this.listData.length/this.$store.state.pageSize)+1,pageSize:this.$store.state.pageSize};this.utils.ajax({url:this.api.queryAuditList,method:"POST",data:a,success:function(a){if(console.log("ssssggg",a),a.content=[{name:"张三",signInTime:"2019-05-09 上午"}],a.content.length){var i=a.content.map(function(t){return t});t.listData=i}}})}},created:function(){this.tabclass()}},s={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{},[i("div",{staticClass:"header van-nav-bar van-nav-bar--fixed van-hairline--bottom",staticStyle:{"z-index":"1"},attrs:{"data-v-0f4718e4":""}},[i("div",{staticClass:"van-nav-bar__left",attrs:{"data-v-0f4718e4":""},on:{click:t.onClickLeft}},[i("i",{staticClass:"van-icon van-icon-arrow-left van-nav-bar__arrow",attrs:{"data-v-0f4718e4":""}})]),t._v(" "),i("div",{staticClass:"van-nav-bar__title van-ellipsis tosa",attrs:{"data-v-0f4718e4":""}},[t._v("跟师考勤")]),t._v(" "),i("div",{staticClass:"van-nav-bar__right ",attrs:{"data-v-0f4718e4":""},on:{click:t.onClickRight}},[i("van-icon",{attrs:{name:"scan",size:"1.8em"}})],1)]),t._v(" "),i("div",{staticClass:"layout_content"},[i("ViewList",{attrs:{listObj:t.listObj,listData:t.listData}})],1)])},staticRenderFns:[]};var l=i("VU/8")(o,s,!1,function(t){i("Nb/o")},"data-v-5df6fa96",null);a.default=l.exports},"Nb/o":function(t,a){}});
//# sourceMappingURL=32.5fb41c509aab4512136b.js.map