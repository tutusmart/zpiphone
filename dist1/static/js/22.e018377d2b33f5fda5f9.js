webpackJsonp([22],{rXG9:function(t,i){},x1TE:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("ifoU"),e=s.n(a),n={name:"LookAttendance",data:function(){return{reason:"",noPassShow:!1,imgList:[],imgIndexMap:new e.a,activity:{}}},methods:{onClickLeft:function(){this.utils.goBack(this)},queryActivityDetail:function(){var t=this;this.utils.ajax({url:this.api.auditActivityDetail,data:this.$route.params,method:"POST",success:function(i){i.attachmentList.forEach(function(i,s){t.utils.checkSuffix(i.name)&&(t.imgList.push(i.path),t.imgIndexMap.set(s,t.imgList.length-1))}),t.activity=i}})},noPass:function(){this.noPassShow=!0},beforeClose:function(t,i){if("confirm"===t){if(!this.reason)return this.Toast({duration:500,message:"请填写审核意见"}),void i(!1);if(this.reason.length>100)return;this.audit(2,"审核不通过"),i()}else this.reason="",i()},audit:function(t,i){var s=this,a={auditFlag:t,auditNote:this.reason,teachingIds:[this.$route.params.id]};this.utils.ajax({method:"post",data:a,url:this.api.saveTeachingAuditResult,success:function(t){setTimeout(function(){s.Toast(i)},300),s.utils.goBack(s)}})},showAttachment:function(t,i){if(this.utils.checkSuffix(t.name))this.utils.imagePreview(this.imgList,this.imgIndexMap.get(i));else if(0==this.utils.isInAndroid())this.Toast("请通过电脑进行查看或下载");else{console.log("调用app下载");var s={name:t.name,url:t.path};this.utils.downLoadFile(s)}}},created:function(){this.queryActivityDetail()}},o={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{},[s("van-nav-bar",{staticClass:"header",attrs:{title:"活动详情",fixed:"","left-arrow":""},on:{"click-left":function(i){return t.onClickLeft()}}}),t._v(" "),s("div",{staticClass:"head layout_content"},[s("div",{staticClass:"cont"},[s("h3",[t._v(t._s(t.activity.title))]),t._v(" "),s("ul",[s("li",[s("p",[t._v("活动时间：")]),t._v(" "),s("p",{staticClass:"activity-time"},[t._v(t._s(t.activity.startTime)+" ~ "+t._s(t.activity.endTime))])]),t._v(" "),s("li",[s("p",[t._v("主讲人：")]),t._v(" "),s("p",[t._v(t._s(t.activity.speaker))])]),t._v(" "),s("li",[s("p",[t._v("地点：")]),t._v(" "),s("p",[t._v(t._s(t.activity.locationOfTeaching))])]),t._v(" "),s("li",[s("p",[t._v("报名人数：")]),t._v(" "),s("p",{staticClass:"p1"},[t._v(t._s(t.activity.numOfSignUp))])])])]),t._v(" "),s("div",{staticClass:"empty"}),t._v(" "),s("div",{staticClass:"cont"},[s("p",[t._v("活动详情：")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(t.activity.detail)}}),t._v(" "),s("p",[t._v("上传资料：")]),t._v(" "),s("div",{staticClass:"datum"},t._l(t.activity.attachmentList,function(i,a){return s("div",{staticClass:"img a"},[s("p",{on:{click:function(s){return t.showAttachment(i,a)}}},[t._v(t._s(i.name))])])}),0)])]),t._v(" "),s("div",{staticClass:"button"},[s("p",{staticClass:"pass",on:{click:function(i){return t.audit(1,"审核通过")}}},[t._v("审核通过")]),t._v(" "),s("p",{staticClass:"noPass",on:{click:function(i){return t.noPass()}}},[t._v("审核不通过")])]),t._v(" "),s("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClose},model:{value:t.noPassShow,callback:function(i){t.noPassShow=i},expression:"noPassShow"}},[s("p",{staticClass:"cause"},[t._v("审核意见")]),t._v(" "),s("van-field",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入审核意见",rows:"1",autosize:""},model:{value:t.reason,callback:function(i){t.reason=i},expression:"reason"}})],1)],1)},staticRenderFns:[]};var c=s("VU/8")(n,o,!1,function(t){s("rXG9")},"data-v-cb93b4f4",null);i.default=c.exports}});
//# sourceMappingURL=22.e018377d2b33f5fda5f9.js.map