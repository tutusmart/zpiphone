{"version":3,"sources":["webpack:///src/view/attendance/Leave.vue","webpack:///./src/view/attendance/Leave.vue?eaa1","webpack:///./src/view/attendance/Leave.vue"],"names":["Leave","name","data","leaveShow","timeShow","isAndroid","leaveData","attendanceTypeId","reason","type","startDate","endDate","hours","dayNum","filePath","currentDate","Date","this","$store","state","timestamp","replace","maxLen","timeTitle","columns","methods","onClickLeft","utils","goBack","onConfirm","value","id","hideMask","selected","timeConfirm","formatDate","getTime","timeToHours","endTime","split","startTime","date","minute","formatter","pickerType","getLeaveType","_this","ajax","method","flag","url","api","queryAttendanceType","success","forEach","item","text","submit","_this2","Toast","saveLeave","created","isInAndroid","attendance_Leave","render","_vm","_h","$createElement","_c","_self","staticClass","class","attrs","title","fixed","left-arrow","on","click-left","_v","is-link","click","$event","directives","rawName","expression","placeholder","maxlength","domProps","input","target","composing","$set","_s","position","model","callback","$$v","show-toolbar","confirm","cancel","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6HAoDA,IAAAA,GACAC,KAAA,QACAC,KAFA,WAGA,OACAC,WAAA,EACAC,UAAA,EACAC,WAAA,EACAC,WACAC,iBAAA,GACAC,OAAA,GACAC,KAAA,MACAC,UAAA,MACAC,QAAA,MACAC,MAAA,MACAC,OAAA,MACAC,SAAA,IAEAC,YAAA,IAAAC,KAAAC,KAAAC,OAAAC,MAAAC,UAAAC,QAAA,WACAZ,KAAA,GACAa,OAAA,IACAC,UAAA,GACAC,aAGAC,SACAC,YADA,WAEAT,KAAAU,MAAAC,OAAAX,OAEAY,UAJA,SAIAC,GAEAb,KAAAX,UAAAG,KAAAqB,EAAA7B,KACAgB,KAAAX,UAAAC,iBAAAuB,EAAAC,GACAd,KAAAe,YAEAC,SAVA,SAUAxB,GACAQ,KAAAR,OAEA,cAAAA,EACAQ,KAAAd,WAAA,GAEAc,KAAAb,UAAA,EACAa,KAAAM,UAAA,cAAAd,EAAA,gBAGAyB,YApBA,SAoBAJ,GAEAb,KAAAX,UAAAW,KAAAR,MAAAQ,KAAAU,MAAAQ,WAAAL,EAAAM,WACA,IAAA1B,EAAAO,KAAAX,UAAAI,UACAC,EAAAM,KAAAX,UAAAK,QACA,WAAAD,GAAA,QAAAC,EAAA,CACAM,KAAAX,UAAAM,MAAAK,KAAAU,MAAAU,YAAA,IAAArB,KAAAN,EAAAW,QAAA,eAAAL,KAAAL,EAAAU,QAAA,YACA,IAAAiB,EAAA3B,EAAA4B,MAAA,QACAC,EAAA9B,EAAA6B,MAAA,QAGAE,GAFA,IAAAzB,KAAAC,KAAAU,MAAAQ,WAAAxB,EAAA4B,MAAA,YAAA7B,EAAA6B,MAAA,SAAAlB,QAAA,WAAAe,UACA,IAAApB,KAAAN,EAAAW,QAAA,WAAAe,WACA,YACAxB,EAAA0B,EAAAC,MAAA,QACAG,EAAAJ,EAAAC,MAAA,QACAC,EAAAD,MAAA,QACA,KACAE,GAAA,KAEA7B,EAAA,QAAAA,GAAA8B,EAAA,KACAD,GAAA,IAEA,GAAA7B,GAAA,GAAA8B,IACAD,GAAA,IAGAxB,KAAAX,UAAAO,OAAA4B,EAEAxB,KAAAe,YAEAA,SAjDA,WAkDAf,KAAAb,SAAAa,KAAAd,WAAA,GAEAwC,UApDA,SAoDAlC,EAAAqB,GACA,OAAAb,KAAAU,MAAAiB,WAAAnC,EAAAqB,IAEAe,aAvDA,WAuDA,IAAAC,EAAA7B,KACAA,KAAAU,MAAAoB,MACAC,OAAA,OACA9C,MAAA+C,KAAA,GACAC,IAAAjC,KAAAkC,IAAAC,oBACAC,QAAA,SAAAnD,GACAA,EAAAoD,QAAA,SAAAC,GACAA,EAAAC,KAAAD,EAAAtD,OAEA6C,EAAAtB,QAAAtB,MAIAuD,OApEA,WAoEA,IAAAC,EAAAzC,KACAA,KAAAX,UAAAC,iBAIA,QAAAU,KAAAX,UAAAI,UAIA,QAAAO,KAAAX,UAAAK,QAIAM,KAAAX,UAAAM,MAAA,GACAK,KAAA0C,MAAA,gBAGA1C,KAAAX,UAAAE,OAIAS,KAAAU,MAAAoB,MACAC,OAAA,OACA9C,KAAAe,KAAAX,UACA4C,IAAAjC,KAAAkC,IAAAS,UACAP,QAAA,SAAAnD,GACAwD,EAAA/B,MAAAC,OAAA8B,MARAzC,KAAA0C,MAAA,WARA1C,KAAA0C,MAAA,WAJA1C,KAAA0C,MAAA,WAJA1C,KAAA0C,MAAA,aA6BAE,QA3HA,WA4HA5C,KAAAZ,UAAAY,KAAAU,MAAAmC,cACA7C,KAAA4B,iBC9KekB,GADEC,OAFjB,WAA0B,IAAAC,EAAAhD,KAAaiD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,YAAAC,MAAAN,EAAA5D,UAAA,iBAA2D+D,EAAA,eAAoBE,YAAA,SAAAE,OAA4BC,MAAA,OAAAC,MAAA,GAAAC,aAAA,IAA0CC,IAAKC,aAAAZ,EAAAvC,eAA8BuC,EAAAa,GAAA,KAAAV,EAAA,OAAwBE,YAAA,mBAA6BF,EAAA,OAAYE,YAAA,WAAqBF,EAAA,YAAiBI,OAAOC,MAAA,OAAAM,UAAA,GAAAjD,MAAAmC,EAAA3D,UAAAG,MAAuDmE,IAAKI,MAAA,SAAAC,GAAyB,OAAAhB,EAAAhC,SAAA,kBAAmC,GAAAgC,EAAAa,GAAA,KAAAV,EAAA,OAA4BE,YAAA,WAAqBF,EAAA,YAAiBI,OAAOC,MAAA,OAAAM,UAAA,GAAAjD,MAAAmC,EAAA3D,UAAAI,WAA4DkE,IAAKI,MAAA,SAAAC,GAAyB,OAAAhB,EAAAhC,SAAA,iBAAmCgC,EAAAa,GAAA,KAAAV,EAAA,YAA6BI,OAAOC,MAAA,OAAAM,UAAA,GAAAjD,MAAAmC,EAAA3D,UAAAK,SAA0DiE,IAAKI,MAAA,SAAAC,GAAyB,OAAAhB,EAAAhC,SAAA,eAAiCgC,EAAAa,GAAA,KAAAV,EAAA,YAA6BI,OAAOC,MAAA,QAAA3C,MAAAmC,EAAA3D,UAAAM,SAA6CqD,EAAAa,GAAA,KAAAV,EAAA,YAA6BI,OAAOC,MAAA,OAAA3C,MAAAmC,EAAA3D,UAAAO,WAA6C,GAAAoD,EAAAa,GAAA,KAAAV,EAAA,OAA4BE,YAAA,WAAqBF,EAAA,YAAiBI,OAAOC,MAAA,UAAgBR,EAAAa,GAAA,KAAAV,EAAA,YAA6Bc,aAAajF,KAAA,QAAAkF,QAAA,UAAArD,MAAAmC,EAAA3D,UAAA,OAAA8E,WAAA,qBAA0Fd,YAAA,WAAAE,OAAgCa,YAAA,UAAAC,UAAArB,EAAA3C,QAA+CiE,UAAWzD,MAAAmC,EAAA3D,UAAA,QAA+BsE,IAAKY,MAAA,SAAAP,GAAyBA,EAAAQ,OAAAC,WAAsCzB,EAAA0B,KAAA1B,EAAA3D,UAAA,SAAA2E,EAAAQ,OAAA3D,WAAyDmC,EAAAa,GAAA,KAAAV,EAAA,KAAsBE,YAAA,oBAA8BL,EAAAa,GAAA,OAAAb,EAAA2B,GAAA3B,EAAA3C,QAAA,YAAA2C,EAAAa,GAAA,KAAAV,EAAA,OAAqEE,YAAA,cAAwBF,EAAA,cAAmBI,OAAO/D,KAAA,QAAcmE,IAAKI,MAAAf,EAAAR,UAAoBQ,EAAAa,GAAA,cAAAb,EAAAa,GAAA,KAAAV,EAAA,aAAmDI,OAAOqB,SAAA,UAAoBC,OAAQhE,MAAAmC,EAAA,UAAA8B,SAAA,SAAAC,GAA+C/B,EAAA9D,UAAA6F,GAAkBZ,WAAA,eAAyBhB,EAAA,cAAmBI,OAAOyB,eAAA,GAAAxB,MAAA,OAAAjD,QAAAyC,EAAAzC,SAAuDoD,IAAKsB,QAAAjC,EAAApC,UAAAsE,OAAAlC,EAAAjC,aAA+C,GAAAiC,EAAAa,GAAA,KAAAV,EAAA,aAAkCI,OAAOqB,SAAA,UAAoBC,OAAQhE,MAAAmC,EAAA,SAAA8B,SAAA,SAAAC,GAA8C/B,EAAA7D,SAAA4F,GAAiBZ,WAAA,cAAwBhB,EAAA,uBAA4BI,OAAOC,MAAAR,EAAA1C,UAAAd,KAAA,WAAAkC,UAAAsB,EAAAtB,WAAkEiC,IAAKsB,QAAAjC,EAAA/B,YAAAiE,OAAAlC,EAAAjC,UAAgD8D,OAAQhE,MAAAmC,EAAA,YAAA8B,SAAA,SAAAC,GAAiD/B,EAAAlD,YAAAiF,GAAoBZ,WAAA,kBAA2B,YAEp3EgB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEvG,EACA+D,GATF,EAVA,SAAAyC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/17.687a7660037953fb2f73.js","sourcesContent":["<template>\n  <div class=\"leaveWarp\" :class=\"isAndroid?'autoInput':''\">\n    <van-nav-bar title=\"请假申请\" class=\"header\" fixed left-arrow @click-left=\"onClickLeft\"/>\n\n    <div class=\"layout_content\">\n      <div class=\"module\">\n        <van-cell title=\"请假类型\" is-link :value=\"leaveData.type\" @click=\"selected('leaveType')\"/>\n      </div>\n\n      <div class=\"module\">\n        <van-cell title=\"开始时间\" is-link :value=\"leaveData.startDate\" @click=\"selected('startDate')\"/>\n        <van-cell title=\"结束时间\" is-link :value=\"leaveData.endDate\" @click=\"selected('endDate')\"/>\n        <van-cell title=\"请假小时数\" :value=\"leaveData.hours\"/>\n        <van-cell title=\"请假天数\" :value=\"leaveData.dayNum\"/>\n      </div>\n\n      <div class=\"module\">\n        <van-cell title=\"请假原因\"/>\n        <textarea class=\"textarea\" v-model=\"leaveData.reason\" placeholder=\"请输入请假原因\" :maxlength=\"maxLen\"></textarea>\n        <p class=\"leave_tips gray\">不能超过{{maxLen}}字符</p>\n      </div>\n\n      <div class=\"bottomBtn\">\n        <van-button type=\"info\" @click=\"submit\">提交申请</van-button>\n      </div>\n      <van-popup v-model=\"leaveShow\" position=\"bottom\">\n        <van-picker\n          show-toolbar\n          title=\"请假类型\"\n          :columns=\"columns\"\n          @confirm=\"onConfirm\"\n          @cancel=\"hideMask\"\n        />\n      </van-popup>\n\n      <van-popup v-model=\"timeShow\" position=\"bottom\">\n        <van-datetime-picker\n          v-model=\"currentDate\"\n          :title=\"timeTitle\"\n          type=\"datetime\"\n          @confirm=\"timeConfirm\"\n          @cancel=\"hideMask\"\n          :formatter=\"formatter\"\n        />\n      </van-popup>\n    </div>\n\n  </div>\n</template>\n\n<script>\n  // 请假\n  export default {\n    name: \"Leave\",\n    data() {\n      return {\n        leaveShow: false,\n        timeShow: false,\n        isAndroid: false,\n        leaveData: {\n          attendanceTypeId: \"\",\n          reason: \"\",\n          type: \"请选择\",\n          startDate: \"请选择\",\n          endDate: \"请选择\",\n          hours: \"请选择\",\n          dayNum: \"请选择\",\n          filePath: \"\"\n        },\n        currentDate: new Date(this.$store.state.timestamp.replace(/-/g, \"/\")),\n        type: \"\",\n        maxLen: 200,\n        timeTitle: \"\",\n        columns: []\n      };\n    },\n    methods: {\n      onClickLeft() {\n        this.utils.goBack(this);\n      },\n      onConfirm(value) {\n        // 选择请假类型\n        this.leaveData.type = value.name;\n        this.leaveData.attendanceTypeId = value.id;\n        this.hideMask();\n      },\n      selected(type) {\n        this.type = type;\n\n        if (type === \"leaveType\") {\n          this.leaveShow = true;\n        } else {\n          this.timeShow = true;\n          this.timeTitle = type === \"startDate\" ? \"开始时间\" : \"结束时间\";\n        }\n      },\n      timeConfirm(value) {\n        // 选择开始时间或者结束时间\n        this.leaveData[this.type] = this.utils.formatDate(value.getTime());\n        let startDate = this.leaveData.startDate;\n        let endDate = this.leaveData.endDate;\n        if (startDate !== \"请选择\" && endDate !== \"请选择\") {\n          this.leaveData.hours = this.utils.timeToHours(new Date(startDate.replace(/-/g, \"/\")), new Date(endDate.replace(/-/g, \"/\")));\n          let endTime = endDate.split(\" \")[1];\n          let startTime = startDate.split(\" \")[1];\n          let endDay = new Date(this.utils.formatDate(endDate.split(\" \")[0] + \" \" + startDate.split(\" \")[1]).replace(/-/g, \"/\")).getTime();\n          let startDay = new Date(startDate.replace(/-/g, \"/\")).getTime();\n          let date = (endDay - startDay) / 24 / 3600 / 1000;\n          let hours = endTime.split(\":\")[0];\n          let minute = endTime.split(\":\")[1];\n          let startThours = startTime.split(\":\")[0];\n          if (startThours < 12) {\n            date += 0.5;\n          }\n          if (hours > 12 || hours == 12 && minute > 0) {\n            date += 0.5;\n          }\n          if (hours == 0 && minute == 0) {\n            date -= 0.5;\n          }\n\n          this.leaveData.dayNum = date;\n        }\n        this.hideMask();\n      },\n      hideMask() {\n        this.timeShow = this.leaveShow = false;\n      },\n      formatter(type, value) {\n        return this.utils.pickerType(type, value);\n      },\n      getLeaveType() {\n        this.utils.ajax({\n          method: \"POST\",\n          data: { flag: 1 },\n          url: this.api.queryAttendanceType,\n          success: data => {\n            data.forEach(item => {\n              item.text = item.name;\n            });\n            this.columns = data;\n          }\n        });\n      },\n      submit() {\n        if (!this.leaveData.attendanceTypeId) {\n          this.Toast(\"请选择请假类型\");\n          return;\n        }\n        if (this.leaveData.startDate === \"请选择\") {\n          this.Toast(\"请选择开始时间\");\n          return;\n        }\n        if (this.leaveData.endDate === \"请选择\") {\n          this.Toast(\"请选择结束时间\");\n          return;\n        }\n        if (this.leaveData.hours < 0.4) {\n          this.Toast(\"开始时间必须小于结束时间\");\n          return;\n        }\n        if (!this.leaveData.reason) {\n          this.Toast(\"请填写请假原因\");\n          return;\n        }\n        this.utils.ajax({\n          method: \"POST\",\n          data: this.leaveData,\n          url: this.api.saveLeave,\n          success: data => {\n            this.utils.goBack(this);\n          }\n        });\n      }\n    },\n    created() {\n      this.isAndroid = this.utils.isInAndroid();\n      this.getLeaveType();\n    }\n  };\n</script>\n\n<style scoped>\n  .leaveWarp {\n    padding-bottom: 2.5rem;\n  }\n\n  .autoInput {\n    min-height: 100vh;\n  }\n\n  .bottomBtn button {\n    width: 100%;\n  }\n\n  .van-picker__title {\n    font-size: .85rem;\n  }\n\n  .van-picker {\n    z-index: 10;\n  }\n\n  .textarea {\n    width: 100%;\n    min-height: 5rem;\n    padding: .5rem .9rem;\n    border: none;\n    resize: none;\n    box-sizing: border-box;\n  }\n\n  .leave_tips {\n    text-align: right;\n    padding: .5rem .9rem;\n    margin: 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/attendance/Leave.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"leaveWarp\",class:_vm.isAndroid?'autoInput':''},[_c('van-nav-bar',{staticClass:\"header\",attrs:{\"title\":\"请假申请\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_vm._v(\" \"),_c('div',{staticClass:\"layout_content\"},[_c('div',{staticClass:\"module\"},[_c('van-cell',{attrs:{\"title\":\"请假类型\",\"is-link\":\"\",\"value\":_vm.leaveData.type},on:{\"click\":function($event){return _vm.selected('leaveType')}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"module\"},[_c('van-cell',{attrs:{\"title\":\"开始时间\",\"is-link\":\"\",\"value\":_vm.leaveData.startDate},on:{\"click\":function($event){return _vm.selected('startDate')}}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"结束时间\",\"is-link\":\"\",\"value\":_vm.leaveData.endDate},on:{\"click\":function($event){return _vm.selected('endDate')}}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"请假小时数\",\"value\":_vm.leaveData.hours}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"请假天数\",\"value\":_vm.leaveData.dayNum}})],1),_vm._v(\" \"),_c('div',{staticClass:\"module\"},[_c('van-cell',{attrs:{\"title\":\"请假原因\"}}),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.leaveData.reason),expression:\"leaveData.reason\"}],staticClass:\"textarea\",attrs:{\"placeholder\":\"请输入请假原因\",\"maxlength\":_vm.maxLen},domProps:{\"value\":(_vm.leaveData.reason)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.leaveData, \"reason\", $event.target.value)}}}),_vm._v(\" \"),_c('p',{staticClass:\"leave_tips gray\"},[_vm._v(\"不能超过\"+_vm._s(_vm.maxLen)+\"字符\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"bottomBtn\"},[_c('van-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交申请\")])],1),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.leaveShow),callback:function ($$v) {_vm.leaveShow=$$v},expression:\"leaveShow\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"title\":\"请假类型\",\"columns\":_vm.columns},on:{\"confirm\":_vm.onConfirm,\"cancel\":_vm.hideMask}})],1),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.timeShow),callback:function ($$v) {_vm.timeShow=$$v},expression:\"timeShow\"}},[_c('van-datetime-picker',{attrs:{\"title\":_vm.timeTitle,\"type\":\"datetime\",\"formatter\":_vm.formatter},on:{\"confirm\":_vm.timeConfirm,\"cancel\":_vm.hideMask},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fbcb9a20\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/attendance/Leave.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fbcb9a20\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Leave.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Leave.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Leave.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fbcb9a20\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Leave.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fbcb9a20\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/attendance/Leave.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}