{"version":3,"sources":["webpack:///src/view/entryregister/EntryRegister.vue","webpack:///./src/view/entryregister/EntryRegister.vue?f555","webpack:///./src/view/entryregister/EntryRegister.vue"],"names":["EntryRegister","name","components","ViewList","data","_this2","this","startTime","utils","formatDate","Date","getTime","startTimeShow","replace","active","timeShow","descriptShow","checkedTimeShow","remark","checkInTime","currentDate","currentPage","tabs","title","loading","finished","error","finishedText","listObj","list","field","leftClass","render","key","click","selected","newList","methods","onClickLeft","goBack","onLoad","console","log","getData","change","index","document","querySelector","scrollTop","$store","state","tabActive","formatter","type","value","pickerType","transformData","dataResult","_this3","forEach","element","traineeMajorText","getValueByKey","majors","traineeMajorCode","str","arr","split","m","Number","_this","currentTab","Math","ceil","length","pageSize","params","statusList","endTime","ajax","url","api","queryEntryRegisterList","method","success","content","concat","totalElements","totalPages","checkedList","filter","ele","entryType","status","Toast","ajaxUpdateEntryDepartmentStatus","obj","datas","push","id","updateEntryDepartmentStatus","conformDate","cancleDate","beforeClose","action","done","timeSelected","conformCheckedTime","cancleCheckedDate","created","entryregister_EntryRegister","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","left-arrow","on","click-left","_v","sticky","offset-top","swipeable","title-active-color","color","line-height","model","callback","$$v","expression","_l","item","is-link","_e","error-text","finished-text","offset","update:error","$event","$set","load","listData","position","confirm","cancel","show-cancel-button","before-close","placeholder","autosize","trim","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/45.53bedb3fee03d2fa46bf.js","sourcesContent":["<template>\r\n   <div class=\"entryRegister\">\r\n        <van-nav-bar title=\"入科登记\" class=\"header\" fixed left-arrow @click-left=\"onClickLeft\"/>\r\n        <div class=\"layout_content\">\r\n            <van-tabs v-model=\"active\" sticky  :offset-top=\"40\"  swipeable title-active-color=\"#1a7fe9\" color=\"#5fa4ec\" :line-height=\"2\" @change=\"change\">\r\n                <div v-for=\"(item, index) in tabs\">\r\n                    <van-tab :title=\"item.title\">\r\n                        <div class=\"entryTime\" v-if=\"index == 1\">\r\n                          <van-cell title=\"入科时间\" is-link :value=\"startTimeShow\" @click=\"timeSelected\"/>\r\n                        </div>\r\n                        <div class=\"entryRegisterCont\">\r\n                            <van-list\r\n                                v-model=\"item.loading\"\r\n                                :finished=\"item.finished\"\r\n                                :error.sync=\"item.error\"\r\n                                error-text=\"请求失败，点击重新加载\"\r\n                                :finished-text=\"item.finishedText\"\r\n                                :offset=\"50\"\r\n                                @load=\"onLoad()\"\r\n                              >\r\n                              <div class=\"entryRegisterList\">\r\n                                  <ViewList :listObj=\"item.listObj\" :listData=\"item.newList\"></ViewList>\r\n                              </div>\r\n                            </van-list>\r\n                        </div>\r\n                        <footer v-if=\"index == 0\" class=\"mt\">\r\n                          <div class=\"button\">\r\n                              <p class=\"entry\" @click=\"entryType(1)\">已入科</p>\r\n                              <p class=\"notEntry\" @click=\"entryType(0)\">未入科</p>\r\n                          </div>\r\n                        </footer>\r\n                    </van-tab>\r\n                </div>\r\n            </van-tabs>\r\n\r\n          <van-popup v-model=\"timeShow\" position=\"bottom\">\r\n              <van-datetime-picker\r\n                v-model=\"checkInTime\"\r\n                type=\"datetime\"\r\n                @confirm=\"conformDate\"\r\n                @cancel=\"cancleDate\"\r\n                :formatter = \"formatter\"\r\n              />\r\n          </van-popup>\r\n          <van-popup v-model=\"checkedTimeShow\" position=\"bottom\">\r\n              <van-datetime-picker\r\n                v-model=\"currentDate\"\r\n                type=\"year-month\"\r\n                @confirm=\"conformCheckedTime\"\r\n                @cancel=\"cancleCheckedDate\"\r\n                 :formatter=\"formatter\"\r\n              />\r\n          </van-popup>\r\n          <!-- <van-popup v-model=\"descriptShow\" position=\"bottom\"> -->\r\n            <van-dialog v-model=\"descriptShow\" show-cancel-button :before-close=\"beforeClose\">\r\n              <p class=\"title\"><strong class=\"red\"> *</strong>未入科说明:</p>\r\n              <div class=\"descript\">\r\n                  <van-field\r\n                      v-model.trim =\"remark\"\r\n                      type=\"textarea\"\r\n                      placeholder=\"未入科说明\"\r\n                      autosize\r\n                  />\r\n              </div>\r\n              <!-- <div class=\"btnBox\">\r\n                <van-button type=\"default\" size=\"small\" @click=\"cancle()\">取消</van-button>\r\n                <van-button type=\"info\" size=\"small\" @click=\"confirm()\">确定</van-button>\r\n              </div> -->\r\n            </van-dialog>\r\n          <!-- </van-popup> -->\r\n        </div>\r\n\r\n   </div>\r\n\r\n</template>\r\n<script>\r\n\r\nimport ViewList from '@/components/ViewList';\r\nexport default {\r\n  name:\"EntryRegister\",\r\n  components:{\r\n    \"ViewList\": ViewList\r\n  },\r\n  data() {\r\n    var startTime = this.utils.formatDate(new Date().getTime(),'yyyy-MM');\r\n    var startTimeShow = this.utils.formatDate(new Date().getTime(),'yyyy-MM').replace(/-/g,\"/\");\r\n    return {\r\n        //firstLoad:true,\r\n        active: 0,\r\n        timeShow: false,\r\n        descriptShow: false,\r\n        checkedTimeShow: false,\r\n\r\n        remark:'',\r\n        checkInTime: new Date(),\r\n        startTime: startTime,\r\n        startTimeShow:startTimeShow,\r\n        currentDate: new Date(),\r\n\r\n\r\n        currentPage: 1,\r\n\r\n\r\n        tabs: [\r\n          {\r\n            title:\"待登记\",\r\n            loading: false,\r\n            finished: false,\r\n            error: false,\r\n            finishedText:'没有更多了',\r\n            listObj:{\r\n                list:[\r\n                  { field: \"姓名：\", name: \"studentName\", leftClass: \"gray\" },\r\n                  { field: \"参培年份：\", name:\"traineeYear\", leftClass:\"gray\" },\r\n                  { field: \"专业：\", name:\"traineeMajorText\", leftClass:\"gray\" },\r\n\r\n                  { field: \"轮转科室：\", name: \"departmentName\", leftClass: \"gray\" },\r\n                  { field: \"入科时间：\", name:\"startTime\",  leftClass:\"gray\", render:(data,key) => {\r\n                    return  data[key]? this.utils.formatDate(data[key], \"yyyy-MM-dd\").replace(/-/g,\"/\"):\"\";\r\n                  }}\r\n                ],\r\n                click: (data) => {\r\n                  if(this.active == 0) {\r\n                    data.selected = !data.selected;\r\n                  }\r\n                }\r\n\r\n            },\r\n            newList:[]\r\n          },\r\n          {\r\n            title:'已登记',\r\n            loading: false,\r\n            finished: false,\r\n            error: false,\r\n            finishedText:'没有更多了',\r\n            listObj:{\r\n                list:[\r\n                  { field: \"姓名：\", name: \"studentName\", leftClass: \"gray\" },\r\n                  { field: \"参培年份：\", name:\"traineeYear\", leftClass:\"gray\" },\r\n                  { field: \"专业：\", name:\"traineeMajorText\", leftClass:\"gray\" },\r\n\r\n                  { field: \"轮转科室：\", name: \"departmentName\", leftClass: \"gray\" },\r\n                  { field: \"入科时间：\", name:\"startTime\",  leftClass:\"gray\", render:(data,key) => {\r\n                     return  data[key]? this.utils.formatDate(data[key], \"yyyy-MM-dd\").replace(/-/g,\"/\"):\"\";\r\n                  }},\r\n                  { field: \"备注：\", name: \"remark\", leftClass: \"gray\" },\r\n                ],\r\n                click: (data) => {\r\n                  if(this.active == 0) {\r\n                    data.selected = !data.selected;\r\n                  }\r\n                }\r\n\r\n              },\r\n              newList:[]\r\n          }\r\n        ]\r\n    }\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.utils.goBack(this);\r\n    },\r\n    onLoad:function() {\r\n     console.log('load--->');\r\n     this.getData();\r\n    },\r\n    change( index, title ) {\r\n      document.querySelector(\".layout_content\").scrollTop = 0;\r\n      this.active = index;\r\n      this.$store.state.tabActive = this.active;\r\n      // if( index == 0 ) {\r\n      //     this.currentPage = 1;\r\n      //     this.getEntryRegisterList(0); //待登记\r\n      // } else if( index == 1 ) {\r\n      //     this.currentPage = 1;\r\n      //     this.getEntryRegisterList(1);  //已登记\r\n      // }\r\n    },\r\n    formatter(type, value) {\r\n      return this.utils.pickerType( type, value );\r\n    },\r\n    transformData( dataResult ) {\r\n       dataResult.forEach( element => {\r\n          element.selected = false;\r\n          element.traineeMajorText = this.utils.getValueByKey(this.$store.state.majors, element.traineeMajorCode);\r\n       });\r\n       return dataResult;\r\n    },\r\n    formatDate(str) {\r\n      let arr = str.split(\"-\");\r\n      let m = Number(arr[1]);\r\n      if ( m == 2) {\r\n        if (arr[0] % 4 === 0 && arr[0] % 100 === 0 && arr[0] % 400 === 0) {\r\n          return \"-29\";\r\n        } else {\r\n          return \"-28\";\r\n        }\r\n      }\r\n      if (m == 1 || m == 3 || m == 5 || m == 7 || m == 8 || m == 10 || m == 12) {\r\n        return \"-31\";\r\n      } else {\r\n        return \"-30\";\r\n      }\r\n    },\r\n    getData(value) {\r\n        var _this = this;\r\n        var  currentTab = this.tabs[this.active];\r\n        this.currentPage =  Math.ceil(currentTab.newList.length /  this.$store.state.pageSize);\r\n        this.currentPage = this.currentPage + 1;\r\n        if(value) {  //第一页\r\n           this.currentPage = 1;\r\n        }\r\n        // if( this.firstLoad) {\r\n        //     this.currentPage = 1;\r\n        //     this.firstLoad = false;\r\n        // }\r\n        var params = {\r\n          currentPage: this.currentPage,\r\n          pageSize: this.$store.state.pageSize,\r\n        };\r\n\r\n        if(this.active == 0) { //待登记\r\n          params.statusList = ['2'];\r\n        } else if(this.active == 1) { //已登记\r\n          params.statusList = ['3','4'];\r\n          // params.startTime = this.startTime;\r\n          // params.endTime =  this.startTime;\r\n          params.startTime = this.startTime + \"-01\";\r\n          params.endTime =  this.startTime + this.formatDate(this.startTime);\r\n        }\r\n\r\n\r\n        this.utils.ajax({\r\n          url: this.api.queryEntryRegisterList,\r\n          data: params,\r\n          method: \"POST\",\r\n          success: data => {\r\n            if(_this.currentPage == 1) {\r\n               currentTab.newList = _this.transformData(data.content);\r\n            }else {\r\n              currentTab.newList = currentTab.newList.concat(_this.transformData(data.content)) ;\r\n            }\r\n\r\n            if (data.content.length == 0) {\r\n               currentTab.finishedText = '';\r\n            } else  {\r\n               currentTab.finishedText = \"没有更多了\";\r\n            }\r\n            _this.totalElements = data.totalElements;\r\n            _this.totalPages = data.totalPages;\r\n            // 加载状态结束\r\n            currentTab.loading = false;\r\n            if(_this.currentPage >= _this.totalPages) {\r\n              currentTab.finished = true;\r\n            }else {\r\n              currentTab.finished = false;\r\n            }\r\n          }\r\n        },true);\r\n    },\r\n\r\n\r\n    //获取选中的数据\r\n    checkedList () {\r\n      var checkedList = this.tabs[this.active].newList.filter( (ele) => {\r\n        return ele.selected == true;\r\n      });\r\n      //console.log('checkedList--->--', checkedList);\r\n      return checkedList;\r\n    },\r\n    entryType(value) {\r\n      var checkedList = this.checkedList();\r\n       if(value == 1) { //已入科\r\n          this.status = '4'; //已报到的\r\n          if(checkedList.length == 0) {\r\n            this.Toast(\"请选择待登记的进行入科登记\");\r\n            return;\r\n          }\r\n          this.ajaxUpdateEntryDepartmentStatus();\r\n       }else if(value == 0) {  //未入科\r\n          this.status = '3';  //未报到的\r\n          if(checkedList.length == 0) {\r\n            this.Toast(\"请选择待登记的进行未入科说明\");\r\n            return;\r\n          }\r\n          this.descriptShow = true;\r\n       }\r\n    },\r\n\r\n    // 入科登记 已入科接口\r\n    ajaxUpdateEntryDepartmentStatus () {\r\n        var _this = this;\r\n        var params = {};\r\n        var ids = [];\r\n        let obj = {\r\n          status: this.status,\r\n          datas: []\r\n        }\r\n        var checkedList = this.checkedList();\r\n        checkedList.forEach(( ele, index )=>{\r\n          obj.datas.push( {id: ele.id, checkInTime: ele.startTime} );\r\n        });\r\n        // if(this.status == 4) {\r\n        //   params.checkInTime = this.utils.formatDate(this.checkInTime.getTime(),'yyyy-MM-dd HH:mm');\r\n        // }\r\n        // else if( this.status == 3 ) {\r\n        //     params.remark = this.remark;\r\n        // }\r\n        params.remark = this.remark||\"\";\r\n        this.utils.ajax({\r\n          url: this.api.updateEntryDepartmentStatus,\r\n          data: obj,\r\n          method: \"POST\",\r\n          success: data => {\r\n             _this.getData(1);\r\n          }\r\n        });\r\n    },\r\n\r\n    conformDate(value) {\r\n\r\n      //this.checkInTime = this.utils.formatDate(value.getTime(),'yyyy-MM-dd');\r\n      this.checkInTime = value;\r\n      if(!this.checkInTime) {\r\n         this.Toast(\"请选择报到时间\");\r\n      }\r\n      this.ajaxUpdateEntryDepartmentStatus();\r\n      this.cancleDate();\r\n    },\r\n    cancleDate() {\r\n      this.timeShow = false;\r\n      //this.checkInTime = this.utils.formatDate(value.getTime(),'yyyy-MM-dd');\r\n\r\n    },\r\n    beforeClose(action, done) {\r\n      //console.log('action-->--', action);\r\n      if(action == \"confirm\") {\r\n         if(!this.remark) {\r\n         this.Toast('请输入未入科说明');\r\n         done(false);\r\n         return;\r\n      } else {\r\n          if(this.remark.length > 255) {\r\n            this.Toast('未入科说明不能超过255个字符');\r\n            done(false);\r\n            return;\r\n          }\r\n      }\r\n      this.ajaxUpdateEntryDepartmentStatus();\r\n      this.descriptShow = false;\r\n\r\n      } else if(action == \"cancel\") {\r\n        this.descriptShow = false;\r\n        this.remark = '';\r\n      }\r\n      done();\r\n    },\r\n\r\n    timeSelected() {\r\n      this.checkedTimeShow = true;\r\n    },\r\n    conformCheckedTime(value) {\r\n        this.startTime = this.utils.formatDate(value.getTime(),'yyyy-MM');\r\n        this.startTimeShow = this.startTime.replace(/-/g, \"/\")\r\n        this.currentDate = value;\r\n\r\n        this.cancleCheckedDate();\r\n        this.getData(1);\r\n    },\r\n    cancleCheckedDate() {\r\n        this.checkedTimeShow = false;\r\n    }\r\n  },\r\n  created() {\r\n     //this.change(0);\r\n     this.active = this.$store.state.tabActive;\r\n  }\r\n\r\n}\r\n</script>\r\n<style>\r\n  /* .entryRegisterList {\r\n      background:#fff;\r\n  } */\r\n  /* .entryRegisterCont {\r\n    margin-bottom: 1.6rem;\r\n  } */\r\n  .button {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    position: fixed;\r\n    bottom: 0;\r\n    color: white;\r\n    font-size: 0.875rem;\r\n  }\r\n  .button p {\r\n    width: 50%;\r\n    text-align: center;\r\n    padding: 0.5rem 0;\r\n    margin: 0;\r\n  }\r\n  .button .entry {\r\n    background: #007ACC;\r\n  }\r\n  .button .notEntry {\r\n    background: #CD3333;\r\n  }\r\n\r\n  .title {\r\n    height: 2rem;\r\n    line-height: 2rem;\r\n    margin: 0;\r\n    padding: 0 0.9rem;\r\n  }\r\n  .descript {\r\n    margin:0 0.8rem 0.8rem;\r\n    border: 1px solid #ccc;\r\n  }\r\n  .btnBox {\r\n    text-align: center;\r\n    margin-bottom: 0.8rem;\r\n  }\r\n  .btnBox .van-button {\r\n    margin: 0 0.8rem;\r\n  }\r\n  .entryTime {\r\n    padding: 0 0.8rem;\r\n    border-bottom: 1px solid#ddd;\r\n    background: #fff;\r\n  }\r\n  .mt {\r\n    margin-top: 2rem;\r\n  }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/entryregister/EntryRegister.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"entryRegister\"},[_c('van-nav-bar',{staticClass:\"header\",attrs:{\"title\":\"入科登记\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_vm._v(\" \"),_c('div',{staticClass:\"layout_content\"},[_c('van-tabs',{attrs:{\"sticky\":\"\",\"offset-top\":40,\"swipeable\":\"\",\"title-active-color\":\"#1a7fe9\",\"color\":\"#5fa4ec\",\"line-height\":2},on:{\"change\":_vm.change},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.tabs),function(item,index){return _c('div',[_c('van-tab',{attrs:{\"title\":item.title}},[(index == 1)?_c('div',{staticClass:\"entryTime\"},[_c('van-cell',{attrs:{\"title\":\"入科时间\",\"is-link\":\"\",\"value\":_vm.startTimeShow},on:{\"click\":_vm.timeSelected}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"entryRegisterCont\"},[_c('van-list',{attrs:{\"finished\":item.finished,\"error\":item.error,\"error-text\":\"请求失败，点击重新加载\",\"finished-text\":item.finishedText,\"offset\":50},on:{\"update:error\":function($event){return _vm.$set(item, \"error\", $event)},\"load\":function($event){return _vm.onLoad()}},model:{value:(item.loading),callback:function ($$v) {_vm.$set(item, \"loading\", $$v)},expression:\"item.loading\"}},[_c('div',{staticClass:\"entryRegisterList\"},[_c('ViewList',{attrs:{\"listObj\":item.listObj,\"listData\":item.newList}})],1)])],1),_vm._v(\" \"),(index == 0)?_c('footer',{staticClass:\"mt\"},[_c('div',{staticClass:\"button\"},[_c('p',{staticClass:\"entry\",on:{\"click\":function($event){return _vm.entryType(1)}}},[_vm._v(\"已入科\")]),_vm._v(\" \"),_c('p',{staticClass:\"notEntry\",on:{\"click\":function($event){return _vm.entryType(0)}}},[_vm._v(\"未入科\")])])]):_vm._e()])],1)}),0),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.timeShow),callback:function ($$v) {_vm.timeShow=$$v},expression:\"timeShow\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"datetime\",\"formatter\":_vm.formatter},on:{\"confirm\":_vm.conformDate,\"cancel\":_vm.cancleDate},model:{value:(_vm.checkInTime),callback:function ($$v) {_vm.checkInTime=$$v},expression:\"checkInTime\"}})],1),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.checkedTimeShow),callback:function ($$v) {_vm.checkedTimeShow=$$v},expression:\"checkedTimeShow\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"year-month\",\"formatter\":_vm.formatter},on:{\"confirm\":_vm.conformCheckedTime,\"cancel\":_vm.cancleCheckedDate},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1),_vm._v(\" \"),_c('van-dialog',{attrs:{\"show-cancel-button\":\"\",\"before-close\":_vm.beforeClose},model:{value:(_vm.descriptShow),callback:function ($$v) {_vm.descriptShow=$$v},expression:\"descriptShow\"}},[_c('p',{staticClass:\"title\"},[_c('strong',{staticClass:\"red\"},[_vm._v(\" *\")]),_vm._v(\"未入科说明:\")]),_vm._v(\" \"),_c('div',{staticClass:\"descript\"},[_c('van-field',{attrs:{\"type\":\"textarea\",\"placeholder\":\"未入科说明\",\"autosize\":\"\"},model:{value:(_vm.remark),callback:function ($$v) {_vm.remark=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"remark\"}})],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e679f54\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/entryregister/EntryRegister.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e679f54\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EntryRegister.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EntryRegister.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EntryRegister.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e679f54\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EntryRegister.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/entryregister/EntryRegister.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}